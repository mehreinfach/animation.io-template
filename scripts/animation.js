function bothSinus(t){var e="";return e+=t,e+=" | ",e+=AnimationHelper.getSinus(t),e+=" | ",e+=Math.sin(t)}function compareSinus(){for(var t=0;1e4>=t;t+=50)bothSinus(t)}function Animation(t){if(null==t.width)throw"Animation() needs width";if(null==t.height)throw"Animation() needs height";this.width=t.width,this.height=t.height,this.minWidth=t.minWidth,this.maxWidth=t.maxWidth,this.minHeight=t.minHeight,this.maxHeight=t.maxHeight,this.firstSceneName=t.firstSceneName,null==this.firstSceneName&&(this.firstSceneName="scene1"),this.loadedScenes=[],config(this),this.stageDiv=createDiv("stage","stage"),setDivSize(this.stageDiv,this.width,this.height),this.startedLoadingAt=now(),this.dimensions={x:this.width,y:this.height},this.textIsDisplaying=!0,this.minWidth=null==this.minWidth?this.width:this.minWidth,this.maxWidth=null==this.maxWidth?this.width:this.maxWidth,this.minHeight=null==this.minHeight?this.height:this.minHeight,this.maxHeight=null==this.maxHeight?this.height:this.maxHeight;var e=document.getElementsByTagName("script");return this.domainName=AnimationHelper.domainFromURL(e[e.length-1].src),this}function loadAnimation(t,e,i,n,o,r,s,a){return getOrCreateIdentity(),compatibleBrowser()?(animationLoader(t,e,i,n,o,r,s,a),void 0):(document.getElementById("backupdiv").style.display="block",void 0)}function loadAnimationInto(t,e,i,n,o){if(getOrCreateIdentity(),!compatibleBrowser())return document.getElementById("fallback").style.display="block",void 0;var r=document.getElementById(e),s=createDiv("animationwrapper","");r.appendChild(s),animationLoader(t,n,o,i,n,n,o,o,s,r)}function animationLoader(title,width,height,firstSceneName,minWidth,maxWidth,minHeight,maxHeight,targetDiv,metaWrapperDiv){if(document.title=title,console.log("____ started loader"),window.onload)var oldOnload=window.onload;if(window.onload=function(){if(oldOnload&&oldOnload(),setTimeout(function(){window.scrollTo(0,1)},100),targetDiv!==void 0&&(minWidth=maxWidth=targetDiv.clientWidth,minHeight=maxHeight=targetDiv.clientHeight),null!==localStorage.getItem("scene")&&window[localStorage.getItem("scene")]!==void 0&&(firstSceneName=localStorage.getItem("scene")),window.animation=new Animation({width:width,height:height,firstSceneName:firstSceneName}),targetDiv===void 0?(window.animationwrapper=createDiv("animationwrapper",""),window.document.body.appendChild(window.animationwrapper),window.animationwrapper.appendChild(this.stageDiv),window.animation.resizeToWindow=!0):(window.animationwrapper=targetDiv,window.animationwrapper.appendChild(window.animation.stageDiv),window.animation.resizeToDiv=!0,metaWrapperDiv!==void 0&&(window.animation.metaWrapperDiv=metaWrapperDiv)),window.animation.adaptScaling(),config(window.animation),window.animation.config.waitForServer>0){var waitingImg=document.createElement("img");waitingImg.src="images/waiting.gif",window.animation.waitingDiv=document.createElement("div"),window.animation.waitingDiv.id="waitingdiv",window.animation.waitingDiv.appendChild(waitingImg),window.animation.stageDiv.appendChild(window.animation.waitingDiv)}waitForCurrentuserDataFromServerFor(window.animation.waitForServer,function(){window.animation.waitingDiv!==void 0&&window.animation.stageDiv.removeChild(window.animation.waitingDiv);var sceneNum=parseInt(window.location.hash.substring(1),10);isNaN(sceneNum)?window.animation.loadAndShow(firstSceneName):eval("window.animation.loadAndShow('scene"+sceneNum+"')"),window.animation.startLoop(),fadeIn(window.animationwrapper)})},window.onresize)var oldOnresize=window.onresize;window.onresize=function(){oldOnresize&&oldOnresize(),window.animation.adaptScaling()}}function setGuessedOrientation(){return window.innerWidth>window.innerHeight?(window.orientation="landscape","landscape"):(window.orientation="portrait","portrait")}function paramOrVariable(t,e,i,n){return"object"==typeof t&&t[e]!==void 0?t[e]:i!==void 0?i:n!==void 0?n:void 0}function onLocalhost(){return/localhost/.exec(window.location.hostname)?!0:!1}function sameprefix(t,e){return 0>t?-Math.abs(e):Math.abs(e)}function relativeOrAbsolutePath(t,e){return/^https?:\/\//.exec(e.toLowerCase())?e:t+e}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),i="x"===t?e:8|3&e;return i.toString(16)})}function easeOut(t,e,i,n){return t/=n,t--,i*(t*t*t+1)+e}function randomId(){return"id"+Math.floor(1e4*Math.random())+Date.now()}function getParameterFromUrlByName(t){t=t.replace(/[\[]/,"\\\\[").replace(/[\]]/,"\\\\]");var e=RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function distance(t,e,i,n){return Math.abs(Math.sqrt((i-t)*(i-t)+(n-e)*(n-e)))}function vector(t,e,i,n){var o=distance(t,e,i,n);return{x:(i-t)/o,y:(n-e)/o,distance:o}}function now(){return(new Date).getTime()}function timeInMinutes(t){return console.log("DEPRECATION-WARNING: timeInMinutes() is deprecated, please use minutesToMilliseconds()"),minutesToMilliseconds(t)}function minutesToMilliseconds(t){return 60*1e3*t}function seconds(){return parseInt(now()/1e3,10)}function isNumeric(t){return!notNumeric(t)}function notNumeric(t){return t===void 0||isNaN(parseFloat(t))||!isFinite(t)}function round(t,e){return 0>e&&(e=0),this.q=Math.pow(10,e),Math.round(t*this.q)/this.q}function cutOffPx(t){var e=t.length;return parseFloat((""+t).substring(0,e-2))}function createDiv(t,e){var i=document.createElement("div");return i.setAttribute("id",t),i.setAttribute("class",e),i}function t(){return now()}function browserCompatible(){try{return new Audio,!0}catch(t){return!1}}function minutesToTime(t){return 1e3*60*t}function getIntegerFromEndOfString(t){return parseInt(t.match(/\d+$/)[0],10)}function setDivSize(t,e,i){t.style.width=e+"px",t.style.height=i+"px"}function dowhen(theAction,conditionAsString,tryAgainIn,doAnywayAfter){eval(conditionAsString)||0>=doAnywayAfter?theAction():window.setTimeout(function(){dowhen(theAction,conditionAsString,tryAgainIn,doAnywayAfter-tryAgainIn)},tryAgainIn)}function pluralize(t,e,i,n){return 0===t?e.replace("%count%",0):1===t?i.replace("%count%",1):n.replace("%count%",AnimationHelper.integerValueOfOr(t,0))}function rotateXaroundOriginByAngle(t,e,i,n,o){return i+Math.cos(o)*(t-i)-Math.sin(o)*(e-n)}function rotateYaroundOriginByAngle(t,e,i,n,o){return n+Math.sin(o)*(t-i)+Math.cos(o)*(e-n)}function logActors(){for(var t=0;window.animation.currentScene.actors.length>t;t++)console.log(""+t+": "+window.animation.currentScene.actors[t].filename)}function logActorsSorted(){for(var t=[],e=0;window.animation.currentScene.actors.length>e;e++)t.push(window.animation.currentScene.actors[e].filename+": "+e);t.sort();for(var i=0;t.length>i;i++)console.log(t[i])}function actor(t){return console.log(window.animation.currentScene.actors[t].filename),window.animation.currentScene.actors[t]}function Actor(t,e,i,n){this.startAnimationTimestamp=now(),this.actortype="actor template",this.startPosition={x:t,y:e},this.vector={x:0,y:0},this.startX=t,this.startY=e,this.imagesizeX=i,this.imagesizeY=n,this.rotationCenterX=i!==void 0?i/2:0,this.rotationCenterY=n!==void 0?n/2:0,this.spin=0,this.offsetX=0,this.offsetY=0,this.zeroOffsX=0,this.zeroOffsY=0,this.needsMoving=!1,this.defaultdirectory="",this.tilt=0,this.behaviors=[],this.reactions=[],this.reactionTargets=[],this.source="",this.phases=[],this.oldPhase=0,this.phaseCycle=1e3,this.comesBack=!1,this.waitingForReset=!1,this.waitingForResetSince=null,this.lastVisibilityCheckInSeconds=now(),this.originaldelay=0,this.delay=0,this.zIndex=0,this.scene=null,this.enteredAt=null,this.addClass=function(t){return this.image.className+=" "+t,this},this.hasId=function(t){this.image.setAttribute("id",t)},this.setSize=function(t,e){this.image.style.zIndex=this.actualZIndex(),this.imagesize={x:t,y:e},this.image.style.width=t+"px",this.image.style.height=e+"px"},this.flipHorizontal=function(){return this.flippinghorizontally=!0,this},this.flipVertical=function(){return this.flippinghorizontally=!0,this},this.enter=function(t){this.image.style.zIndex=this.overrideZIndex?10*(this.scene.actors.length+1)+this.overrideZIndexExtraValue:this.zIndex,t.div.appendChild(this.image),this.enteredAt=now()}}function moveActor(t){t.position.x+=t.vector.x,t.position.y+=t.vector.y,t.image.style.left=t.absolutePositionTopLeftX()+"px",t.image.style.top=t.absolutePositionTopLeftY()+"px",t.lastVector=t.vector,t.vector={x:0,y:0},t.needsMoving=!1}function tiltActor(t){t.tilt=(t.tilt+t.spin)%360,t.image.style.transformOrigin=t.rotationCenterX+"px "+t.rotationCenterY+"px",t.image.style.webkitTransformOrigin=t.rotationCenterX+"px "+t.rotationCenterY+"px",t.image.style.msTransformOrigin=t.rotationCenterX+"px "+t.rotationCenterY+"px",t.image.style.transform="rotate("+t.tilt+"deg)",t.image.style.webkitTransform="rotate("+t.tilt+"deg)",t.image.style.msTransform="rotate("+t.tilt+"deg)",t.spin=0}function animateactor(e){if(e.currentlyVisible||(e.image.style.visibility="hidden"),e.comesBack&&notVisibleOnStage(e))e.waitingForReset?t()-e.waitingForResetSince>=e.resetDelay&&(e.reset(),e.waitingForReset=!1):e.comesBack&&(e.alterOpacity(0),e.waitingForReset=!0,e.waitingForResetSince=t());else if(e.delay>0&&!e.finishedDelaying)null===e.startedDelayingAt?e.startedDelayingAt=t():t()>=e.startedDelayingAt+e.delay&&(e.finishedDelaying=!0);else{e.phases.length>1&&e.currentPhase()!==e.oldPhase&&(e.image.src=e.phases[e.currentPhase()],e.oldPhase=e.currentPhase());for(var i=0;e.behaviors.length>i;i++)e.behaviors[i].done||e.behaviors[i].applybehavior();(e.needsMoving||0!==e.vector.x||0!==e.vector.y)&&moveActor(e),(0!==e.spin||0!==e.tilt)&&tiltActor(e),e.showsCorners&&e.updateCorners()}}function redDot(t,e,i,n){return t.createActor(window.animation.domainName+"/images/reddot.png",e-4,i-4,10,10).isInLayer(n).isOnTop()}function fadeIn(t,e){(notNumeric(t.style.opacity)||0>t.style.opacity)&&(t.style.opacity=0),notNumeric(e)&&(e=1e3),prepareFade(t,e,1)}function fadeOut(t,e){(notNumeric(t.style.opacity)||t.style.opacity>1)&&(t.style.opacity=1),notNumeric(e)&&(e=1e3),prepareFade(t,e,0)}function executeFadeInTimeoutLoop(t,e,i,n,o,r){var s=i-e,a=s/(n/o),c=e+a;c>1||0>c?t.style.opacity=i:(t.style.opacity=c,setTimeout(function(){executeFadeInTimeoutLoop(t,c,i,n-r,o,r)},r))}function prepareFade(t,e,i){var n=parseFloat(t.style.opacity),o=30,r=1e3/o;executeFadeInTimeoutLoop(t,n,i,e,o,r)}function setInvisible(t){return t.image.style.visibility="hidden",t.textDiv!==void 0&&(t.textDiv.style.overflow="hidden"),t.currentlyVisible=!1,t}function syncInvisibleByKey(t){updateKey(t+"-invisibleForever",!0),updateKey(t+"-visibleForever",!1)}function setInvisibleAndSync(t){return setInvisible(t),t.syncs()?syncInvisibleByKey(t.synckey):console.error("You are trying to sync "+t.filename+" but have not set a synckey! Use setSynckey()…"),t}function setVisible(t,e){return e!==void 0&&(t.alterOpacity(e),updateKey(t.synckey+"-invisibleForever",!1),updateKey(t.synckey+"-visibleForever",!0)),t.image.style.visibility="visible",t.textDiv!==void 0&&(t.textDiv.style.overflow="auto"),t.currentlyVisible=!0,t}function syncVisibleByKey(t){updateKey(t+"-visibleForever",!0),updateKey(t+"-invisibleForever",!1)}function setVisibleAndSync(t,e){return setVisible(t,e),t.syncs()?syncVisibleByKey(t.synckey):console.error("You are trying to sync "+t.filename+" but have not set a synckey! Use setSynckey()…"),t}function notVisibleOnStage(t){return t.position.x>t.scene.dimensions.x||0>t.position.x+t.imagesize.x||0>t.position.y+t.imagesize.y||t.position.y>t.scene.dimensions.y}function visibleOnStage(){return!notVisibleOnStage}function Scene(t){return"string"==typeof t||"number"==typeof t?(console.error('Please use the new format for creating scenes, e.g. like this: {"animation": animation, "id": "scene0", "title": "sometitle", "width": 1000, "height": 700}'),void 0):(this.id=t.id,this.title=t.title!==void 0?t.title:t.id,this.div=createDiv(t.id,"scene"),this.animation=t.animation,this.syncs=!AnimationHelper.truth(t.syncs),this.isVisible=!1,this.actors=[],this.texts=[],this.textDisplaying=!0,this.alwaysShowsText=!1,this.displayedAt=Date.now(),scrollingPerspectiveStrength="undefined",this.scrollPositionX=0,this.scrollPositionY=0,this.scrollPositionVectorX=0,this.scrollPositionVectorY=0,this.dimensions={},this.dimensions.x=t.width!==void 0?parseInt(t.width,10):0,this.dimensions.y=t.height!==void 0?parseInt(t.height,10):0,this.currentZIndex=0,this.addActor=function(t){t.zIndex=this.currentZIndex+=10,this.actors.push(t)},this.setDivSizeToStage=function(){setDivSize(this.div,window.animation.width,window.animation.height)},this.age=function(){return Date.now()-this.displayedAt},this.alwaysShowText=function(){this.alwaysShowsText=!0},this.url=function(){var t="";return t+=window.location.protocol,t+="//",t+=window.location.hostname,t+=window.location.pathname,t+="#"+this.id.match(/\d+$/)[0]},this.preloadSceneIds=[t.id],this.removeBehaviorsThatCameFromReacts=function(){for(var t=this.actors.length-1;t>=0;t--)try{this.actors[t].removeBehaviorsThatCameFromReacts()}catch(e){}},this.makeVisible=function(){this.div.style.display="block",this.isVisible=!0},this.makeInvisible=function(){this.div.style.display="none",this.isInvisible=!1,this.removeBehaviorsThatCameFromReacts()},this.makeInvisible(),this.cleanup=function(){console.log('cleaning up "'+this.id+'"');for(var t=this.actors.length-1;t>=0;t--)this.actors[t].cleanupBehaviors();this.createActor("blank.png",0,0,0,0).scrollsTo(0,0,1e3)},this.makeOthersInvisible=function(){for(var t=window.animation.textIsDisplaying,e=window.animation.loadedScenes.length-1;e>=0;e--)window.animation.loadedScenes[e].id.match(this.id)?this.makeVisible():(window.animation.loadedScenes[e].makeInvisible(),window.animation.loadedScenes[e].hideText());t||this.alwaysShowsText?this.showText():this.hideText(),window.animation.textIsDisplaying=t},this.enterActors=function(){for(var t=0;this.actors.length>t;t++)this.actors[t].enter(this)},this.write=function(t,e,i,n){var o=document.createElement("div");o.innerHTML=i,o.setAttribute("class","text "+(n===void 0?"":n)),o.style.left=t+"px",o.style.top=e+"px",this.div.appendChild(o),this.texts.push(o)},this.showText=function(){this.textDisplaying=!0;for(var t=this.texts.length-1;t>=0;t--)this.texts[t].style.visibility="visible";window.animation.textIsDisplaying=!0},this.hideText=function(){this.textDisplaying=!1;for(var t=this.texts.length-1;t>=0;t--)this.texts[t].style.visibility="hidden";window.animation.textIsDisplaying=!1},this)}function ismobile(){return!1||null!==navigator.userAgent.match(/iPad/i)||null!==navigator.userAgent.match(/iPhone/i)||null!==navigator.userAgent.match(/iPod/i)||null!==navigator.userAgent.match(/Android/i)||null!==navigator.userAgent.match(/IEMobile/i)}function Plugin(t,e,i,n,o){return this.actor=paramOrVariable(t,"actor",i),this.delay=paramOrVariable(t,"delay",t),this.triggeredByAction=AnimationHelper.truth(paramOrVariable(t,"triggeredByAction",n)),this.easeIn=e!==void 0?e:0,this.needsToCalculateEasein=this.easeIn>0,this.startAnimationTimestamp=new Date,this.sync=!1,this.done=!1,this.running=!1,this.plugintype=!1,this.setup=function(){this.targetObject=isNumeric(o)?i.reactionTargets[o]:i},this.setup(),this.resetStartAnimationTimestamp=function(){this.startAnimationTimestamp=now()},this.applybehavior=function(){},this.resetPlugin=function(){this.done=!1,this.resetStartAnimationTimestamp(),this.needsToCalculateEasein=this.easeIn>0},this.isDoneWhen=function(t,e){this.done=t,e!==void 0&&t&&e(this)},this.reset=function(){this.resetPlugin()},this.cleanupPlugin=function(){},this.cleanup=function(){this.cleanupPlugin()},this.age=function(){return new Date-this.startAnimationTimestamp},this.factor=function(){return this.needsToCalculateEasein&&this.easeIn>0&&this.age()<this.easeIn?Math.cos(this.age()/this.easeIn*(Math.PI/2)-Math.PI/2):(this.needsToCalculateEasein=!1,1)},this}function bindEvent(t,e,i,n){n!==void 0&&(n=null),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function unbindEvent(){this.removeEventListener("click",arguments.callee,!1)}function handleClick(t){var e,i;t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);var n=document.getElementById("animframe");animframeX=n.offsetLeft-n.scrollLeft+n.clientLeft,animframeY=n.offsetTop-n.scrollTop+n.clientTop,e-=animframeX,i-=animframeY,console.log("click, "+e+", "+i),analyzeActorsAtPositionAndRunReactions(e,i)}function analyzeActorsAtPositionAndRunReactions(t,e){if(window.animation.currentScene!==void 0){console.log("analyzing click for "+t+" / "+e);for(var i,n=window.animation.currentScene.actors,o=[],r=!1,s=0;n.length>s;s++)i=n[s],n[s].imagesizeY!==void 0&&n[s].pointIsAboveActor(t,e)&&o.push(n[s]);console.log("\nvisible actors at click, from top to bottom:");for(var a,c=o.length-1;c>=0;c--)i=o[c],a=o[c].filename,i.currentlyVisible||(a+=" (invisible)"),i.passesTouchThroughSet!==void 0&&i.passesTouchThroughSet&&(a+=" – passes touch through"),i.evaluateFirstWhenClicked!==void 0&&i.evaluateFirstWhenClicked&&(a+=" – PRIORITY: "+i.overrideZIndexExtraValue),i.reactions.length>0&&(a+=" – "+pluralize(i.reactions.length,"no reactions","one reaction","%count% reactions")),i.currentlyVisible&&console.log("- "+a);var h=_.filter(o,function(t){return t.evaluateFirstWhenClicked!==void 0&&t.evaluateFirstWhenClicked});h=_.sortBy(h,"overrideZIndexExtraValue");for(var u=h.length-1;u>=0;u--)if(i=h[u],!i.passesTouchThroughSet&&i.currentlyVisible){i.reactions.length>0&&(console.log("executing priority-actor: "+i.filename),i.react()),r=!0;break}var l=_.filter(o,function(t){return t.evaluateFirstWhenClicked===void 0||!t.evaluateFirstWhenClicked});if(!r)for(var d=l.length-1;d>=0;d--)if(i=l[d],(void 0===typeof i.evaluateFirstWhenClicked||!i.evaluateFirstWhenClicked)&&!i.passesTouchThroughSet&&i.currentlyVisible){i.reactions.length>0&&(console.log("executing non-priority-actor: "+i.filename),i.react());break}}}function arrayMinus(t,e){for(var i=t,n=i.length-1;n>=0;n--)for(var o=e.length-1;o>=0;o--)if(e[o].match(i[n])){i=arrayWithout(i,n);break}return i}function arrayWithout(t,e){var i=e>0?t.slice(0,e):[],n=t.slice(e+1);return i.concat(n)}function compatibleBrowser(){var t=!1;return"Chrome"===BrowserDetect.browser&&BrowserDetect.version>=27&&(t=!0),"Explorer"===BrowserDetect.browser&&BrowserDetect.version>=9&&(t=!0),"Firefox"===BrowserDetect.browser&&BrowserDetect.version>=22&&(t=!0),"Safari"===BrowserDetect.browser&&BrowserDetect.version>=6&&(t=!0),t||console.warn("Current Platform is incompatible with Animation.io."),t}function getOrCreateIdentity(){var t;getParameterFromUrlByName("setuser").length>0?(localStorage.clear(),t=getParameterFromUrlByName("setuser")):t=localStorage.getItem("currentUserUuid"),null===t?(console.log("NO USER SAVED ON THIS MACHINE/BROWSER"),t=uuid(),console.log("created identity "+t),localStorage.setItem("currentUserUuid",t)):console.log("existing identity "+t),currentUser={uuid:t},getOrCreateCurrentUserFromServer(t)}function identitylink(){return location.href.split(/[?|#]/)[0]+"?setuser="+currentUser.uuid}function make_script_tag(t){var e=document.createElement("script");e.src=t,e.type="text/javascript",document.body.appendChild(e)}function server_url(){return"http://sync.animation.io"}function getOrCreateCurrentUserFromServer(t){var e=server_url()+"/getorcreate/"+encodeURIComponent(t);e+="?cachebuster="+(""+(new Date).getTime()),make_script_tag(e)}function waitForCurrentuserDataFromServerFor(t,e){dowhen(e,"(typeof window.currentUserLoaded !== 'undefined' && window.currentUserLoaded == true)",500,1e4)}function setCurrentUser(t){console.log("data"),_.each(JSON.parse(t),function(t,e){keyIsSynced(e)||null===localStorage.getItem(e)?localStorage.setItem(e,t):updateKey(e,localStorage.getItem(e))}),console.log(t),window.currentUser=JSON.parse(t),window.currentUserLoaded=!0}function keyOr(t,e){return null===localStorage.getItem(t)?e:"true"===localStorage.getItem(t)?!0:"false"===localStorage.getItem(t)?!1:localStorage.getItem(t)}function updateKey(t,e){localStorage.setItem(t,e),console.log("******* syncing "+t+" with value "+e),setKeyAsUnsynced(t);var i=server_url()+"/setvalue";i+="/"+encodeURIComponent(currentUser.uuid),i+="/"+encodeURIComponent(t),i+="/"+encodeURIComponent(e),make_script_tag(i)}function setKeyAsSynced(t){localStorage.setItem(t+"_synced","true")}function setKeyAsUnsynced(t){localStorage.removeItem(t+"_synced")}function keyIsSynced(t){return null!==localStorage.getItem(t+"_synced")}function keyUpdated(t){localStorage.setItem(t+"_lastsave",now())}function keyAge(t){return parseInt(localStorage.getItem(t+"_lastsave"),10)?now()-parseInt(localStorage.getItem(t+"_lastsave"),10):0}function alterScrollingVector(t,e){window.animation.currentScene.scrollPositionVectorX+=t,window.animation.currentScene.scrollPositionVectorY+=e}function updateScrolling(t,e){(0!==t.scrollPositionVectorX||e)&&(0>=t.scrollPositionX+t.scrollPositionVectorX?(t.scrollPositionX=0,t.hideLeftScrolling(),t.showRightScrolling()):t.scrollPositionX+t.scrollPositionVectorX>=window.animation.currentScene.dimensions.x-window.animation.dimensions.x?(t.hideRightScrolling(),t.showLeftScrolling(),t.scrollPositionX=window.animation.currentScene.dimensions.x-window.animation.dimensions.x):(t.scrollPositionX+=t.scrollPositionVectorX,t.showLeftScrolling(),t.showRightScrolling())),(e||Math.abs(-t.scrollPositionX)||Math.abs(-t.scrollPositionY))&&t.setPerspective(-t.scrollPositionX,-t.scrollPositionY),t.scrollPositionVectorX=t.scrollPositionVectorY=0}function ScrollingTo(t,e,i,n,o,r){var s,a,c,h=new Plugin(0,.5,t,o,r),u=-(t.scene.scrollPositionX-e),l=-(t.scene.scrollPositionY-i),d=now(),p=0,g=0;return h.reset=function(){s=void 0,u>0?s="right":0>u&&(s="down"),a=void 0,l>0?a="down":0>l&&(a="up")},h.reset(),h.applybehavior=function(){!c&&s&&(p=easeOut(now()-d,0,u,n),Math.abs(p)>=Math.abs(u)&&(c=!0,p=-(t.scene.scrollPositionX-e),g=0),window.animation.currentScene.scrollPositionVectorX+=p-g,g=p)},h}function ScrollingBy(t,e,i,n,o){var r=new Plugin(0,.5);e=-e,i=-i,r.triggeredByAction=o;var s,a,c,h=!1,u=now(),l=0,d=0;return r.reset=function(){e>0?s="right":0>e&&(s="down"),i>0?a="down":0>i&&(a="up")},r.reset(),r.applybehavior=function(){c||h||!s||(l=easeOut(now()-u,0,e,n),c=Math.abs(l)>=Math.abs(e),c||(window.animation.currentScene.scrollPositionVectorX+=l-d,d=l))},r}function ScrollingOnHover(t,e,i,n){var o=new Plugin(0,.5);return o.active=!1,o.currentSpeed=e,o.applybehavior=function(){this.active&&(this.currentSpeed*=i,Math.abs(this.currentSpeed)>Math.abs(n)&&(this.currentSpeed=sameprefix(e,n)),window.animation.currentScene.scrollPositionVectorX=this.currentSpeed)},t.scene.scrollingActors.push(t),o}function config(t){t.config={maximumAnimationAge:minutesToMilliseconds(120),waitForServer:1e3,waitingText:"loading data from server",maximumLoadWait:minutesToMilliseconds(1.5),maximumLoadWaitExceededMessage1:"Die maximale Ladezeit von 90 Sekunden wurde erreicht. Die Szene wird jetzt angezeigt. Folgende Objekte haben keine Lade-Rückmeldung gegeben:\n",maximumLoadWaitExceededMessage2:"\n\nMöchten Sie eine E-Mail an Mehreinfach senden mit wichtigen Infos zu diesen Ladeproblemen?",cdnDomain:!1}}function EvaluatingOnCreate(actor,evalCode,triggeredByAction,reactionTargetIndex){var executing=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);return eval(evalCode),executing}function Waving(t,e,i,n,o,r,s){var a=new Plugin(0,0,t,r,s);return a.reset=function(){this.actor=t,this.hertz=i,this.radius=e},a.applybehavior=function(){this.wavingStartedAt===void 0&&(this.wavingStartedAt=now()),this.skew=Math.sin((this.wavingStartedAt-now())*this.hertz/1e3)*this.radius,this.actor.image.style.webkitTransformOrigin=n+"px "+o+"px",this.actor.image.style.webkitTransform="skew("+this.skew+"deg, 0deg)",this.actor.image.style.transformOrigin=n+"px "+o+"px",this.actor.image.style.transform="skew("+this.skew+"deg, 0deg)",this.actor.image.style.msTransformOrigin=n+"px "+o+"px",this.actor.image.style.msTransform="skew("+this.skew+"deg, 0deg)",this.actor.image.style.OTransformOrigin=n+"px "+o+"px",this.actor.image.style.OTransform="skew("+this.skew+"deg, 0deg)"},a}function Appearing(t,e,i,n,o,r){var s=new Plugin(0,0,t,o,r),a=!1;return s.haveTurnedItVisible=!1,s.opacityStep=0,s.appearLength=i,s.startsVisible=n!==void 0&&n===!0?!0:!1,s.cleanup=function(){this.cleanupPlugin(),this.startsVisible&&setVisible(this.targetObject)},s.reset=function(){this.resetPlugin(),a=!1,this.startsVisible||this.targetObject.visibleForever?setVisible(this.targetObject):setInvisible(this.targetObject),this.opacityStep=60/this.appearLength,this.done=!1,this.resetStartAnimationTimestamp(),this.haveTurnedItVisible=!1,this.newOpacity=0},s.reset(),s.applybehavior=function(){return a?(!this.done&&this.age()>e&&(this.haveTurnedItVisible||(this.sync?setVisibleAndSync(this.targetObject):setVisible(this.targetObject,this.newOpacity),this.haveTurnedItVisible=!0),this.newOpacity=this.newOpacity.addUntilTarget(this.opacityStep,1),this.targetObject.alterOpacity(this.newOpacity),this.isDoneWhen(this.targetObject.currentOpacity>=1)),void 0):(console.log("started "+this.actor.filename),this.resetStartAnimationTimestamp(),a=!0,void 0)},s}function Moving(t,e,i,n,o,r,s){var a=new Plugin(r,s);return a.actor=t,a.force={x:e,y:i},a.speed={x:0,y:0},a.friction=n,a.gravitation=o,a.triggeredByTouch=!1,a.reset=function(){this.resetPlugin(),a.speed={x:0,y:0},a.force={x:e,y:i}},a.reset(),a.applybehavior=function(){1!==this.factor()&&(console.log("this.factor(): "+this.factor()),console.log("this.age(): "+this.age())),a.force.x=.9*a.force.x,a.force.y=.9*a.force.y,a.gravitation!==void 0&&(a.force.y+=a.gravitation/50),a.speed.x+=a.force.x,a.speed.y+=a.force.y,a.friction!==void 0&&(a.speed.x=a.speed.x*(1-a.friction/50),a.speed.y=a.speed.y*(1-a.friction/50)),a.actor.vector.x+=a.speed.x*this.factor(),a.actor.vector.y+=a.speed.y*this.factor()},a}function MovingTo(t,e,i,n,o,r,s){var a=new Plugin(0,.5,t,r,s);return a.targetObject.targetX=e,a.targetObject.targetY=i,a.triggeredByAction=r,a.actor=t,a.targetObject=isNumeric(s)?t.reactionTargets[s]:t,a.reset=function(){this.force={x:n,y:o},this.finishedMovingTo=!1},a.reset(),a.applybehavior=function(){if(!this.finishedMovingTo){var t=vector(this.targetObject.position.x,this.targetObject.position.y,a.targetObject.targetX,a.targetObject.targetY);t.distance>2?(this.targetObject.vector.x+=this.force.x*t.x,this.targetObject.vector.y+=this.force.y*t.y):(t.distance=10,this.finishedMovingTo=!0)}},a}function Swinging(t,e,i,n,o,r,s,a){var c=new Plugin(0,0,t,s,a);return c.degrees=0,c.runningValue=0,c.radius=e,c.hertz=i,c.swingcenterX=n,c.swingcenterY=o,c.degreeOffset=r,c.reset=function(){this.oldDegrees=0,this.newDegrees=0,this.firstRun=!0},c.applybehavior=function(){this.runningValue=Math.sin(this.targetObject.age()*this.hertz/1e3),this.degrees=this.runningValue*this.radius/2,this.firstRun?(this.firstRun=!1,this.oldDegrees=this.degrees,this.spin=this.degreeOffset):(this.targetObject.image.style.transformOrigin=this.swingcenterX+"px "+this.swingcenterY+"px",this.targetObject.image.style.webkitTransformOrigin=this.swingcenterX+"px "+this.swingcenterY+"px",this.targetObject.image.style.msTransformOrigin=this.swingcenterX+"px "+this.swingcenterY+"px",this.targetObject.spin=this.oldDegrees-this.degrees),this.oldDegrees=this.degrees},c}function Pulsating(t,e,i,n,o,r){console.log("adding pulsaing to "+t.filename),t.rotationCenterX=t.imagesizeX/2,t.rotationCenterY=t.imagesizeY/2;var s=new Plugin(0,0,t,o,r),a=1,c=1,h="up",u=0,l=!1;return s.reset=function(){this.resetPlugin(),(n===void 0||notNumeric(n))&&(n=0),a=1,c=1,h="up",u=0,l=!1},s.reset(),s.applybehavior=function(){(0===n||n>=u)&&(c=a,a=1+i/10*Math.sin(2*(new Date-this.startAnimationTimestamp)*e/500),a>c&&"down"===h?h="up":c>a&&"up"===h&&(h="down",l=!1),s.targetObject.image.style.webkitTransform="scale("+a+", "+a+")",s.targetObject.image.style.transform="scale("+a+", "+a+")",!l&&"up"===h&&a>1&&(u++,l=!0))},s}function Dissolving(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);r.originalOpacity=AnimationHelper.floatValueOfOr(t.currentOpacity,1),r.originalVisibility=t.image.style.visibility,r.startAfter=e,r.newOpacity=0,r.opacityStep=60/i;var s=!1;return r.reset=function(){this.resetPlugin(),s=!1,this.newOpacity=this.originalOpacity,setVisible(this.targetObject,1)},r.reset(),r.cleanup=function(){this.targetObject.image.style.visibility=this.originalVisibility,this.targetObject.alterOpacity(this.originalOpacity)},r.applybehavior=function(){s||(this.resetStartAnimationTimestamp(),s=!0),!this.done&&this.age()>this.startAfter&&(this.newOpacity=this.newOpacity.subtractUntilZero(this.opacityStep),this.targetObject.alterOpacity(this.newOpacity),this.isDoneWhen(0>=this.newOpacity&&0>=this.targetObject.currentOpacity),this.done&&(this.sync?setInvisibleAndSync(this.targetObject):setInvisible(this.targetObject)))},r}function Rotating(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);r.plugintype="rotating",r.spin=6*e;var s=1e3*i*e;return r.applybehavior=function(){this.done||(this.targetObject.spin+=this.spin,this.running||(this.running=!0),this.done=this.done||!(0!==i||this.age()>s),this.done&&(console.log("rotations !== 0: "+(0!==i)),console.log("this.age(): "+this.age()),console.log("targetAge: "+s),console.log("rotations: "+i)))},r}function Playing(t,e,i,n,o,r,s,a,c){var h=new Plugin(0,0,t,a,c);i!==void 0&&(h.actor.playingImagePath="images/"+i),h.actor.waitingImagePath=h.actor.image.src,h.actor.playEndFunction=s,h.actor.pulsatesWhilePlaying=!1,h.actor.playLooped=n,h.actor.playOnLoad=o,h.actor.playOnLoadExecuted=!1,h.actor.audio=document.createElement("audio"),h.actor.audio.setAttribute("preload","auto");var u=document.createElement("source");return h.reset=function(){h.actor.playOnLoadExecuted=!1,h.actor.audioplaying=!1,h.actor.audio.pause(),h.actor.audioplaying=!1},h.reset(),h.applybehavior=function(){this.actor.playOnLoad&&!this.actor.playOnLoadExecuted&&(this.actor.playOnLoadExecuted=!0,this.actor.toggleAudio())},h.actor.showPlayingImage=function(){this.playingImagePath!==void 0&&(this.image.src=this.playingImagePath),this.pulsatesWhilePlaying&&(console.log("pulsates"),this.pulsates(3,.1,0,0,!0))},h.actor.showWaitingImage=function(){this.image.src=this.waitingImagePath,this.pulsatesWhilePlaying&&(this.behaviors=[])},h.actor.audio.canPlayType("audio/mpeg;")?(u.type="audio/mpeg",u.src="audio/"+e+".mp3"):(u.type="audio/ogg",u.src="audio/"+e+".ogg"),h.actor.audio.appendChild(u),h.actor.audio.actor=h.actor,r===void 0&&(r=0),h.actor.audio.betweenLoops=r,h.actor.playLooped?bindEvent(h.actor.audio,"ended",function(){h.actor.showWaitingImage(this.actor),h.actor.showWaitingImage(this.actor),setTimeout(function(){h.actor.audioplaying&&h.actor.toggleAudio("play")},h.actor.audio.betweenLoops)}):bindEvent(h.actor.audio,"ended",function(){h.actor.showWaitingImage(this.actor),h.actor.audioplaying=!1,h.actor.playEndFunction!==void 0&&h.actor.playEndFunction()}),h.actor.toggleAudio=function(t){"play"===t?this.playAudio():"pause"===t?this.pauseAudio():this.audioplaying?this.pauseAudio():this.playAudio()},h.actor.playAudio=function(){this.audio.currentTime&&(this.audio.currentTime=0),this.backgroundPlayer||this.scene.muteNonBackground(),this.audio.play(),this.showPlayingImage(),this.audioplaying=!0},h.actor.pauseAudio=function(t){this.audio.pause(),this.audioplaying=!1,this.showWaitingImage(),t===void 0&&(t=!0),t&&this.playEndFunction!==void 0&&(console.log("*** pausing Audio!"),this.playEndFunction())},h.actor.reacts("this.toggleAudio();"),h}function StopPlaying(t,e,i){var n=new Plugin(0,0,t,e,i);return n.targetObject.pauseAudio(),n}function StartsPlaying(t,e,i){var n=new Plugin(0,0,t,e,i);return n.targetObject.playAudio(),n}function Drifting(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);return r.reset=function(){this.resetPlugin(),this.force={x:e,y:i}
},r.reset(),r.applybehavior=function(){this.targetObject.vector.x+=this.force.x,this.targetObject.vector.y+=this.force.y},r}function Shaking(t,e,i,n,o,r){var s=new Plugin(0,0,t,o,r);return s.reset=function(){this.peak={x:e/2,y:i/2},this.hertz=n,this.actor=t,this.force={x:0,y:0},this.shakingStartedAt=null},s.applybehavior=function(){null===typeof this.shakingStartedAt&&(this.shakingStartedAt=now()),this.tmpValue=Math.sin((this.shakingStartedAt-now())*this.hertz/250),this.lastTmpValue!==void 0&&(this.targetObject.vector.x+=(this.lastTmpValue-this.tmpValue)*this.peak.x,this.targetObject.vector.y+=(this.lastTmpValue-this.tmpValue)*this.peak.y),this.lastTmpValue=this.tmpValue},s}function Linking(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);return r.actor=t,r.url=e,/iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?bindEvent(r.targetObject.image,"touchstart",function(){this.gotourl()}):bindEvent(r.targetObject.image,"mousedown",function(){this.gotourl()}),r.actor.image.gotourl=function(){return window.open(e,i),!1},r.applybehavior=function(){},r}function togglesText(t){this.reset=function(){},this.reset(),this.applybehavior=function(){t.vector.x+=this.force.x,t.vector.y+=this.force.y}}function MovementCloning(t,e,i,n,o,r){var s=new Plugin(0,0,t,o,r);return s.applybehavior=function(){this.targetObject.position.x=e.position.x+i,this.targetObject.position.y=e.position.y+n,this.targetObject.image.style.left=this.targetObject.position.x+"px",this.targetObject.image.style.top=this.targetObject.position.y+"px",this.targetObject.tilt=e.tilt},s}function CountResetter(t,e,i){var n=new Plugin(0,0,t,e,i);return n.reset=function(){this.resetPlugin(),this.targetObject.counter=this.targetObject.syncs()?parseInt(keyOr(this.synckey+"-counter",AnimationHelper.integerValueOfOr(this.targetObject.counterInitialAmount||0)),10):AnimationHelper.integerValueOfOr(this.targetObject.counterInitialAmount||0),this.targetObject.autosetCountertext()},n.reset(),n}function HavingText(t,e,i,n,o,r){var s=new Plugin(0,0,t,o,r);return s.targetObject.originalText=e+"",s.targetObject.textDiv=document.createElement("div"),s.targetObject.textDiv.setAttribute("id",i),s.targetObject.textDiv.setAttribute("class","hastext "+n),s.targetObject.textDivInner=document.createElement("div"),s.targetObject.textDivInner.setAttribute("class","inner"),s.targetObject.textDiv.appendChild(s.targetObject.textDivInner),s.targetObject.textDiv.style.zIndex="2",s.targetObject.textDiv.style.width=s.targetObject.imagesize.x+"px",s.targetObject.textDiv.style.height=s.targetObject.imagesize.y+"px",s.targetObject.textDiv.style.pointerEvents="none",s.targetObject.scene.div.appendChild(s.targetObject.textDiv),s.targetObject.textDivInner.innerHTML=e,s.applybehavior=function(){s.targetObject.textDiv.style.zIndex=s.targetObject.actualZIndex()+5,s.targetObject.textDiv.style.visibility=s.targetObject.image.style.visibility,s.targetObject.textDiv.style.left=s.targetObject.position.x+"px",s.targetObject.textDiv.style.top=s.targetObject.position.y+"px",s.targetObject.textDiv.style.opacity=s.targetObject.currentOpacity,s.targetObject.textDiv.style.transform="rotate("+s.targetObject.tilt+"deg)",s.targetObject.textDiv.style.webkitTransform="rotate("+s.targetObject.tilt+"deg)",s.targetObject.textDiv.style.msTransform="rotate("+s.targetObject.tilt+"deg)",s.targetObject.textDiv.style.transformOrigin=s.targetObject.image.style.transformOrigin,s.targetObject.textDiv.style.webkitTransformOrigin=s.targetObject.image.style.webkitTransformOrigin,s.targetObject.textDiv.style.msTransformOrigin=s.targetObject.image.style.msTransformOrigin},s}function Multichoicing(t,e,i){var n=new Plugin(0,0,t,e,i);return n.reset=function(){this.resetPlugin()},n.reset(),n.applybehavior=function(){},n}function AppearingAsQuestion(t,e,i){var n=new Plugin(0,0,t,e,i);setVisible(n.targetObject);for(var o=n.targetObject.rightanswers.length-1;o>=0;o--)setVisible(n.targetObject.rightanswers[o]);for(var r=n.targetObject.wronganswers.length-1;r>=0;r--)setVisible(n.targetObject.wronganswers[r]);return n}function ChangingImageSrc(t,e,i,n){var o=new Plugin(0,0,t,i,n);return o.applybehavior=function(){this.targetObject.changeImageSrc(e)},o}function Circling(t,e,i,n,o,r){var s=new Plugin(0,0,t,o,r);return s.tilt=n,s.reset=function(){s.resetPlugin(),s.newX=0,s.newY=0,s.vectorX=0,s.vectorY=0,s.oldX=0,s.oldY=0,s.firstRun=!0},s.counter=0,s.applybehavior=function(){this.counter=this.counter+1,this.circlingStartedAt===void 0&&(this.circlingStartedAt=now()),this.tmpValue=this.circlingStartedAt-now(),this.newX=2*e*Math.cos(this.tmpValue/500*i),this.newY=2*e*Math.sin(this.tmpValue/500*i),this.vectorX=this.newX-this.oldX,this.vectorY=this.newY-this.oldY,this.oldX=this.newX,this.oldY=this.newY,this.firstRun?this.firstRun=!1:(this.targetObject.vector.x+=this.vectorX,this.targetObject.vector.y+=this.vectorY)},s}function Popup(t,e,i,n,o,r,s,a,c){var h=new Plugin(0,0,t,a,c);return window.closepopup===void 0&&(window.closepopup=function(t){var e=document.getElementById(t);e.scene.div.removeChild(e),e.actor.popup=!1}),h.cleanup=function(){h.cleanupPlugin(),h.targetObject.popup&&h.destroy()},h.create=function(){h.iframeDivId=randomId(),h.wrapdiv=window.document.createElement("DIV"),h.wrapdiv.setAttribute("id",h.iframeDivId),h.wrapdiv.setAttribute("class","popupdiv"),h.wrapdiv.style.width=i+"px",h.wrapdiv.style.height=n+"px",h.wrapdiv.style.left=h.targetObject.absolutePositionTopLeftX()+o+"px",h.wrapdiv.style.top=h.targetObject.absolutePositionTopLeftY()+r+"px",h.wrapdiv.scene=h.targetObject.scene,h.wrapdiv.actor=h.targetObject;var t=window.document.createElement("a");t.setAttribute("class","closer");var a=document.createTextNode("×");t.href="javascript:void(0)",t.setAttribute("onclick","closepopup('"+h.iframeDivId+"');"),t.appendChild(a),h.wrapdiv.appendChild(t),h.iframe=window.document.createElement("IFRAME"),h.iframe.setAttribute("src",e),h.iframe.setAttribute("class","iframe"),h.iframe.style.width=i+"px",h.iframe.style.height=n+"px",h.targetObject.popup=h,h.wrapdiv.appendChild(h.iframe),h.targetObject.scene.div.appendChild(h.wrapdiv),s>0&&(h.targetObject.popup.closetimeout=setTimeout("window.closepopup('"+h.iframeDivId+"')",s))},h.destroy=function(){h.targetObject.scene.div.removeChild(document.getElementById(h.targetObject.popup.iframeDivId)),h.targetObject.popup=!1},h.targetObject.popup?h.destroy():h.create(),h}function Bouncing(t,e,i,n,o,r,s){var a=new Plugin(0,0,t,r,s);return a.reset=function(){this.resetPlugin(),this.amplitude=e,this.speed=i,this.times=n,this.damping=o,this.startedAt=now(),this.lastX=0,this.lastY=0},a.reset(),a.applybehavior=function(){var t=(now()-this.startedAt)*this.speed/1e3,e=1>this.times||this.times>t?-Math.abs(this.amplitude*Math.sin(t*this.speed*Math.PI))*Math.pow(this.damping,t):0;this.targetObject.vector.y+=e-this.lastY,this.lastY=e},a}function PlayVideo(t,e,i,n,o,r){var s=new Plugin(0,0,t,o,r),a=3;return s.newPlayTime=i,s.playLength=n,s.videoReadyToPlay=!1,s.cleanup=function(){this.cleanupPlugin(),this.targetObject.image.pause(),this.targetObject.image.currentTime=i===void 0?0:s.newPlayTime/1e3},s.reset=function(){s.videoReadyToPlay=!1,this.resetPlugin()},s.reset(),s.applybehavior=function(){return a>t.image.readyState?(this.isDoneWhen(!1),void 0):(s.videoReadyToPlay||(i!==void 0&&(this.targetObject.image.currentTime=s.newPlayTime/1e3),s.videoReadyToPlay=!0),s.playLength!==void 0&&this.targetObject.image.currentTime>(s.newPlayTime+s.playLength)/1e3&&this.targetObject.image.pause(),this.done||(e===void 0?(this.targetObject.image.play(),this.isDoneWhen(!0)):this.targetObject.age()>e&&(this.targetObject.image.play(),this.isDoneWhen(!0))),void 0)},s}function PauseVideo(t,e,i,n){var o=new Plugin(0,0,t,i,n),r=3;return o.cleanup=function(){this.cleanupPlugin()},o.reset=function(){this.resetPlugin()},o.reset(),o.applybehavior=function(){return r>t.image.readyState?(this.isDoneWhen(!1),void 0):(this.done||(e===void 0?(this.targetObject.image.pause(),this.isDoneWhen(!0)):this.targetObject.age()>e&&(this.targetObject.image.pause(),this.isDoneWhen(!0))),void 0)},o}function PlayVimeo(t,e,i){var n=new Plugin(0,0,t,e,i);return n.cleanup=function(){this.cleanupPlugin();var t={method:"pause"},e=this.targetObject.image.src.split("?")[0];this.targetObject.image.contentWindow.postMessage(JSON.stringify(t),e)},n.reset=function(){this.resetPlugin()},n.reset(),n.applybehavior=function(){if(!this.done){var t={method:"play"},e=this.targetObject.image.src.split("?")[0];this.targetObject.image.contentWindow.postMessage(JSON.stringify(t),e),this.isDoneWhen(!0)}},n}function PauseVimeo(t,e,i){var n=new Plugin(0,0,t,e,i);return n.cleanup=function(){this.cleanupPlugin()},n.reset=function(){this.resetPlugin()},n.reset(),n.applybehavior=function(){if(!this.done){var t={method:"unload"},e=this.targetObject.image.src.split("?")[0];this.targetObject.image.contentWindow.postMessage(JSON.stringify(t),e),this.isDoneWhen(!0)}},n}function ScrollPopUp(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);return r.triggeredByAction=n,r.reset=function(){this.finishedVisibility=!1},r.reset(),r.applybehavior=function(){this.finishedVisibility||this.targetObject.image.contentWindow.scrollBy(i,e),this.finishedVisibility=!0},r}function ScrollText(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);return r.triggeredByAction=n,r.reset=function(){this.finishedScrolling=!1},r.reset(),r.applybehavior=function(){this.finishedScrolling||this.targetObject.textDiv!==void 0&&(this.targetObject.textDiv.scrollTop+=i),this.finishedScrolling=!0},r}function HideObject(t,e,i,n,o){var r=new Plugin(0,0,t,n,o);return r.triggeredByAction=n,r.reset=function(){this.finished=!1},r.reset(),r.applybehavior=function(){this.finished||(e.style.visibility=i?"hidden":""),this.finished=!0},r}function Stopping(t,e,i,n){for(var o=new Plugin(0,0,t,i,n),r=o.targetObject.behaviors.length-1;r>=0;r--)o.targetObject.behaviors[r].plugintype===e&&o.targetObject.behaviors[r].running&&(o.targetObject.behaviors[r].done=!0,console.log("stopping rotating "+r));return o}function Cranking(t,e,i,n,o,r,s,a){var c=new Plugin(0,0,t,s,a);return c.degrees=0,c.runningValue=0,c.radius=e,c.length=i,c.actor.rotationCenterX=n,c.actor.rotationCenterY=o,c.degreeOffset=r,c.currentDirection="clockwise",c.actor.currentCrankFunctionPointer===void 0&&(c.actor.currentCrankFunctionPointer=0),c.reset=function(){this.oldDegrees=0,this.newDegrees=0,this.firstRun=!0},c.applybehavior=function(){this.runningValue=Math.sin(this.age()/this.length),this.degrees=this.runningValue*this.radius,this.firstRun?(this.firstRun=!1,this.oldDegrees=this.degrees,this.spin+=this.degreeOffset):"clockwise"===this.actor.crankdirection?this.targetObject.spin+=this.oldDegrees-this.degrees:this.targetObject.spin-=this.oldDegrees-this.degrees,this.oldDegrees=this.degrees,this.age()>=i&&(this.done=!0,this.actor.crankEndfunctions[this.actor.currentCrankFunctionPointer](this.actor),this.actor.currentCrankFunctionPointer++,this.actor.currentCrankFunctionPointer>=this.actor.crankEndfunctions.length&&(this.actor.currentCrankFunctionPointer=0),this.actor.crankEndfunctions.length>0&&this.actor.resetReactions())},c}if(AnimationHelper===void 0)var AnimationHelper={};if(AnimationHelper.createSinusTable=function(t){var e=[],i=0,n=2*Math.PI/t;do e.push(Math.sin(i)),i+=n;while(2*Math.PI>i);return e},AnimationHelper.sinusTable=AnimationHelper.createSinusTable(1e3),AnimationHelper.truth=function(t){return t===void 0||"undefined"===t||"false"===t?!1:Boolean(t)},AnimationHelper.floatValueOfOr=function(t,e){return isNumeric(t)?parseFloat(t):e},AnimationHelper.integerValueOfOr=function(t,e){return isNumeric(t)?parseInt(t,10):e},AnimationHelper.getSinus=function(t){return AnimationHelper.sinusTable[parseInt(t%1e3,10)]},AnimationHelper.sinusFromTime=function(){return AnimationHelper.sinusTable[parseInt(new Date.getTime%1e3,10)]},AnimationHelper.sinusFromTimeForTesting=function(t){return AnimationHelper.sinusTable[parseInt(t%1e3,10)]},AnimationHelper.domainFromURL=function(t){var e=t.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return e&&e[1]},AnimationIO===void 0)var AnimationIO={};if(AnimationIO.load=function(){},Animation.prototype.adaptScaling=function(){this.resizeToDiv?this.scaleToDiv():this.resizeToWindow&&this.scaleToWindow()},Animation.prototype.scaleToDiv=function(){var t,e,i=window.animationwrapper.clientWidth,n=window.animationwrapper.clientHeight;n>10&&i>10||(i>10?(t=i>this.maxWidth?this.maxWidth:this.minWidth>i?this.minWidth:i,e=t/(this.width/this.height)):n>10?console.log("take only height into consideration"):console.log("use default animation size")),window.metaWrapperDiv!==void 0&&(metaWrapperDiv.style.height=e+"px",metaWrapperDiv.style.width=t+"px"),this.rescale(parseFloat(t/this.width))},Animation.prototype.scaleToWindow=function(){console.log("scaling to window");var t,e=window.innerWidth,i=window.innerHeight,n=i,o=e,r=window.innerWidth/window.innerHeight,s=this.width/this.height;0!==this.minWidth&&s>r?(this.minWidth>e?e=this.minWidth:e>this.maxWidth&&(e=this.maxWidth),t=e/this.width,n=e*t):0!==this.minWidth&&(this.minHeight>i?i=this.minHeight:i>this.maxHeight&&(i=this.maxHeight),t=i/this.height,o=i*t),1!==t&&rescale(t),window.animationwrapper.style.marginTop=(window.innerHeight-parseInt(this.height*t,10))/2+"px",window.animationwrapper.style.width=o+"px",window.animationwrapper.style.marginLeft=(window.innerWidth-parseInt(this.width*t,10))/2+"px",window.animationwrapper.style.height=n+"px"},Animation.prototype.rescale=function(t){this.stageDiv.style.transformOrigin="0 0",this.stageDiv.style.transform="scale("+t+", "+t+")",this.stageDiv.style.msTransformOrigin="0 0",this.stageDiv.style.msTransform="scale("+t+", "+t+")",this.stageDiv.style.webkitTransformOrigin="0 0",this.stageDiv.style.webkitTransform="scale("+t+", "+t+")",this.stageDiv.style.OTransformOrigin="0 0",this.stageDiv.style.OTransform="scale("+t+", "+t+")"},setGuessedOrientation(),requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),Animation.prototype.startLoop=function(){this.animloop=function(){requestAnimFrame(window.animation.animloop);try{for(var t=0;window.animation.currentScene.actors.length>t;t++)animateactor(window.animation.currentScene.actors[t]),updateScrolling(window.animation.currentScene)}catch(e){}},this.animloop()},Animation.prototype.showLoader=function(){var t=300,e=300;this.loader=document.createElement("div"),this.loader.setAttribute("class","animationloader"),this.loader.style.width=window.animation.dimensions.x+"px",this.loader.style.height=window.animation.dimensions.y+"px",this.loader.inner=document.createElement("div"),this.loader.inner.setAttribute("class","inner"),this.loader.loadText=document.createElement("div"),this.loader.loadText.setAttribute("class","percentage"),this.loader.loadimage=document.createElement("img"),this.loader.loadimage.setAttribute("src","http://animation.io/engine/loader.gif"),this.loader.loadimage.setAttribute("class","loadimage"),this.loader.inner.style.width=t+"px",this.loader.inner.style.height=e+"px",this.loader.inner.style.left=(window.animation.dimensions.x-t)/2+"px",this.loader.inner.style.top=(window.animation.dimensions.y-e)/2+"px",this.loader.appendChild(this.loader.inner),this.loader.inner.appendChild(this.loader.loadimage),this.loader.inner.appendChild(this.loader.loadText),this.stageDiv.appendChild(this.loader)},Animation.prototype.updateLoader=function(t){t=Math.ceil(t),t=t>=100?100:t,t=10>t?"0"+t:t,this.loader.loadText.innerHTML=t+"%"},Animation.prototype.hideLoader=function(){try{window.animation.stageDiv.removeChild(this.loader)}catch(t){}},Animation.prototype.reloadAndFadeToScene=function(t){var e=parseInt(/scene(\d+)/.exec(t)[1],10);window.location.hash=e;var i=1200;fadeOut(window.animationwrapper,i/2),setTimeout(function(){window.location.href=window.animation.currentScene.url(),window.location.reload()},i/2+250)},Animation.prototype.showScene=function(t){window.animation.age()>=this.config.maximumAnimationAge?this.reloadAndFadeToScene(t):((this.currentScene===void 0||this.currentScene.age()>1e3)&&(this.currentScene!==void 0&&this.currentScene.cleanup(),this.currentScene=this.loadScene(t),getIntegerFromEndOfString(t),this.currentScene.enterActors(),this.currentScene.reset(),this.currentScene.makeOthersInvisible(),this.currentScene.muteOthers(),updateScrolling(this.currentScene,!0),this.dropUnneededScenes(this.currentScene.preloadSceneIds),this.loadNeededScenes(this.currentScene.preloadSceneIds),window.forceReloadTimer=setTimeout('window.animation.reloadAndFadeToScene("'+t+'")',window.animation.config.maximumAnimationAge)),this.currentScene.syncs&&updateKey("scene",t))},Animation.prototype.showFirstScene=function(){this.showScene(this.firstSceneName)},Animation.prototype.loadAndShow=function(t){window.animation.loadingInterval&&(console.log("stopping loading process to start another"),this.hideLoader(),clearInterval(window.animation.loadingInterval)),this.showLoader(),this.startedLoadingAt=now();var e=window.animation.loadSceneFresh(t);console.log("started loading scene "+t),window.animation.loadingInterval=setInterval(function(){if(this.loadingtime=Math.abs(this.startedLoadingAt-now()),e.hasLoaded()||this.loadingtime>this.config.maximumLoadWait){if(this.loadingtime>this.config.maximumLoadWait){for(var i=this.config.maximumLoadWaitExceededMessage1,n=e.namesOfLoadingActors(),o=n.length-1;o>=0;o--)i+="\n· "+n[o];if(i+=this.config.maximumLoadWaitExceededMessage2,console.log(n),confirm(i)){for(var r="The following objects failed to load on time:\n",s=n.length-1;s>=0;s--)r+="\n· "+n[s];r+="\n\nSzene: "+e.id;try{r+="\n\n"+navigator.userAgent}catch(a){r+="Couldn't determine userAgent."}window.location.href="mailto:speedlab@mehreinfach.de?subject=Animation.io%20Preload&"+encodeURIComponent(location.href)+"&body="+encodeURIComponent(r),console.log("should send mail")}}clearInterval(window.animation.loadingInterval),console.log("Loading of "+t+" complete."),window.animation.showScene(t),window.animation.hideLoader()}else console.log("Waiting for scene "+t+" to load. loadingTime: "+this.loadingtime),window.animation.updateLoader(e.loadedPercentage())},1e3)},Animation.prototype.loadSceneFresh=function(t){for(var e=this.loadedScenes.length-1;e>=0;e--)if(this.loadedScenes[e].id===t)return this.loadedScenes[e];for(var i=this.loadedScenes.length-1;i>=0;i--)if(this.loadedScenes[i].id===t)return this.dropScene(this.loadedScenes[i].id);return window.animation.buildScene(t)},Animation.prototype.buildScene=function(sceneid){var newScene=eval(sceneid+"()");return newScene.setDivSizeToStage(),this.loadedScenes.push(newScene),newScene.stageDiv=this.stageDiv,this.stageDiv.appendChild(newScene.div),newScene.makeInvisible(),newScene},Animation.prototype.loadedSceneIds=function(){for(var t=[],e=this.loadedScenes.length-1;e>=0;e--)t.push(this.loadedScenes[e].id);return t},Animation.prototype.dropUnneededScenes=function(t){for(var e=arrayMinus(this.loadedSceneIds(),t),i=e.length-1;i>=0;i--)this.dropScene(e[i])},Animation.prototype.loadNeededScenes=function(t){for(var e=arrayMinus(t,this.loadedSceneIds()),i=e.length-1;i>=0;i--)this.loadScene(e[i])},Animation.prototype.loadScene=function(t){console.log("-> loadScene "+t);for(var e=this.loadedScenes.length-1;e>=0;e--)if(this.loadedScenes[e].id===t)return this.loadedScenes[e];return this.buildScene(t)},Animation.prototype.dropScene=function(t){for(var e=this.loadedScenes.length-1;e>=0;e--)this.loadedScenes[e].id===t&&(document.getElementById(t),this.stageDiv.removeChild(this.loadedScenes[e].div),this.loadedScenes=arrayWithout(this.loadedScenes,e))},Animation.prototype.age=function(){return now()-this.startAnimationTimestamp},Animation.prototype.startAnimationTimestamp=now(),Animation.prototype.makeOlder=function(t){return this.startAnimationTimestamp-=t,this},Animation.prototype.resetAnimationTimestamp=function(){return this.startAnimationTimestamp=now(),this},!window.console)var console={log:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){}};Number.prototype.subtractUntilZero=function(t){return t>=this?0:this-t},Number.prototype.addUntilTarget=function(t,e){var i=this+t;return i>e?e:i},!function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,r=Function.prototype,s=n.push,a=n.slice,c=n.concat,h=o.toString,u=o.hasOwnProperty,l=n.forEach,d=n.map,p=n.reduce,g=n.reduceRight,f=n.filter,m=n.every,v=n.some,y=n.indexOf,w=n.lastIndexOf,b=Array.isArray,A=Object.keys,x=r.bind,O=function(t){return t instanceof O?t:this instanceof O?(this._wrapped=t,void 0):new O(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=O),exports._=O):t._=O,O.VERSION="1.5.0";var T=O.each=O.forEach=function(t,e,n){if(null!=t)if(l&&t.forEach===l)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var s in t)if(O.has(t,s)&&e.call(n,t[s],s,t)===i)return};O.map=O.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(T(t,function(t,o,r){n.push(e.call(i,t,o,r))}),n)};var S="Reduce of empty array with no initial value";O.reduce=O.foldl=O.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=O.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(T(t,function(t,r,s){o?i=e.call(n,i,t,r,s):(i=t,o=!0)}),!o)throw new TypeError(S);return i},O.reduceRight=O.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return n&&(e=O.bind(e,n)),o?t.reduceRight(e,i):t.reduceRight(e);var r=t.length;if(r!==+r){var s=O.keys(t);r=s.length}if(T(t,function(a,c,h){c=s?s[--r]:--r,o?i=e.call(n,i,t[c],c,h):(i=t[c],o=!0)}),!o)throw new TypeError(S);return i},O.find=O.detect=function(t,e,i){var n;return P(t,function(t,o,r){return e.call(i,t,o,r)?(n=t,!0):void 0}),n},O.filter=O.select=function(t,e,i){var n=[];return null==t?n:f&&t.filter===f?t.filter(e,i):(T(t,function(t,o,r){e.call(i,t,o,r)&&n.push(t)}),n)},O.reject=function(t,e,i){return O.filter(t,function(t,n,o){return!e.call(i,t,n,o)},i)},O.every=O.all=function(t,e,n){e||(e=O.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,n):(T(t,function(t,r,s){return(o=o&&e.call(n,t,r,s))?void 0:i}),!!o)};var P=O.some=O.any=function(t,e,n){e||(e=O.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(T(t,function(t,r,s){return o||(o=e.call(n,t,r,s))?i:void 0}),!!o)};O.contains=O.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):P(t,function(t){return t===e})},O.invoke=function(t,e){var i=a.call(arguments,2),n=O.isFunction(e);return O.map(t,function(t){return(n?e:t[e]).apply(t,i)})},O.pluck=function(t,e){return O.map(t,function(t){return t[e]})},O.where=function(t,e,i){return O.isEmpty(e)?i?void 0:[]:O[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},O.findWhere=function(t,e){return O.where(t,e,!0)},O.max=function(t,e,i){if(!e&&O.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&O.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return T(t,function(t,o,r){var s=e?e.call(i,t,o,r):t;s>n.computed&&(n={value:t,computed:s})}),n.value},O.min=function(t,e,i){if(!e&&O.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&O.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return T(t,function(t,o,r){var s=e?e.call(i,t,o,r):t;n.computed>s&&(n={value:t,computed:s})}),n.value},O.shuffle=function(t){var e,i=0,n=[];return T(t,function(t){e=O.random(i++),n[i-1]=n[e],n[e]=t}),n};var I=function(t){return O.isFunction(t)?t:function(e){return e[t]}};O.sortBy=function(t,e,i){var n=I(e);return O.pluck(O.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var C=function(t,e,i,n){var o={},r=I(null==e?O.identity:e);return T(t,function(e,s){var a=r.call(i,e,s,t);n(o,a,e)}),o};O.groupBy=function(t,e,i){return C(t,e,i,function(t,e,i){(O.has(t,e)?t[e]:t[e]=[]).push(i)})},O.countBy=function(t,e,i){return C(t,e,i,function(t,e){O.has(t,e)||(t[e]=0),t[e]++})},O.sortedIndex=function(t,e,i,n){i=null==i?O.identity:I(i);for(var o=i.call(n,e),r=0,s=t.length;s>r;){var a=r+s>>>1;o>i.call(n,t[a])?r=a+1:s=a}return r},O.toArray=function(t){return t?O.isArray(t)?a.call(t):t.length===+t.length?O.map(t,O.identity):O.values(t):[]},O.size=function(t){return null==t?0:t.length===+t.length?t.length:O.keys(t).length},O.first=O.head=O.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:a.call(t,0,e)},O.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},O.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},O.rest=O.tail=O.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},O.compact=function(t){return O.filter(t,O.identity)};var k=function(t,e,i){return e&&O.every(t,O.isArray)?c.apply(i,t):(T(t,function(t){O.isArray(t)||O.isArguments(t)?e?s.apply(i,t):k(t,e,i):i.push(t)}),i)};O.flatten=function(t,e){return k(t,e,[])},O.without=function(t){return O.difference(t,a.call(arguments,1))},O.uniq=O.unique=function(t,e,i,n){O.isFunction(e)&&(n=i,i=e,e=!1);var o=i?O.map(t,i,n):t,r=[],s=[];return T(o,function(i,n){(e?n&&s[s.length-1]===i:O.contains(s,i))||(s.push(i),r.push(t[n]))}),r},O.union=function(){return O.uniq(O.flatten(arguments,!0))},O.intersection=function(t){var e=a.call(arguments,1);return O.filter(O.uniq(t),function(t){return O.every(e,function(e){return O.indexOf(e,t)>=0})})},O.difference=function(t){var e=c.apply(n,a.call(arguments,1));return O.filter(t,function(t){return!O.contains(e,t)})},O.zip=function(){return O.unzip.apply(O,a.call(arguments))},O.unzip=function(){for(var t=O.max(O.pluck(arguments,"length").concat(0)),e=Array(t),i=0;t>i;i++)e[i]=O.pluck(arguments,""+i);return e},O.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},O.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=O.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},O.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(w&&t.lastIndexOf===w)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},O.range=function(t,e,i){1>=arguments.length&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,r=Array(n);n>o;)r[o++]=t,t+=i;return r};var B=function(){};O.bind=function(t,e){var i,n;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!O.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));B.prototype=t.prototype;var o=new B;B.prototype=null;var r=t.apply(o,i.concat(a.call(arguments)));return Object(r)===r?r:o}},O.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},O.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw Error("bindAll must be passed function names");return T(e,function(e){t[e]=O.bind(t[e],t)}),t},O.memoize=function(t,e){var i={};return e||(e=O.identity),function(){var n=e.apply(this,arguments);return O.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},O.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},O.defer=function(t){return O.delay.apply(O,[t,1].concat(a.call(arguments,1)))},O.throttle=function(t,e,i){var n,o,r,s=null,a=0;i||(i={});var c=function(){a=new Date,s=null,r=t.apply(n,o)};return function(){var h=new Date;a||i.leading!==!1||(a=h);var u=e-(h-a);return n=this,o=arguments,0>=u?(clearTimeout(s),s=null,a=h,r=t.apply(n,o)):s||i.trailing===!1||(s=setTimeout(c,u)),r}},O.debounce=function(t,e,i){var n,o=null;return function(){var r=this,s=arguments,a=function(){o=null,i||(n=t.apply(r,s))},c=i&&!o;return clearTimeout(o),o=setTimeout(a,e),c&&(n=t.apply(r,s)),n}},O.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},O.wrap=function(t,e){return function(){var i=[t];return s.apply(i,arguments),e.apply(this,i)}},O.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},O.after=function(t,e){return function(){return 1>--t?e.apply(this,arguments):void 0}},O.keys=A||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)O.has(t,i)&&e.push(i);return e},O.values=function(t){var e=[];for(var i in t)O.has(t,i)&&e.push(t[i]);return e},O.pairs=function(t){var e=[];for(var i in t)O.has(t,i)&&e.push([i,t[i]]);return e},O.invert=function(t){var e={};for(var i in t)O.has(t,i)&&(e[t[i]]=i);return e},O.functions=O.methods=function(t){var e=[];for(var i in t)O.isFunction(t[i])&&e.push(i);return e.sort()},O.extend=function(t){return T(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},O.pick=function(t){var e={},i=c.apply(n,a.call(arguments,1));return T(i,function(i){i in t&&(e[i]=t[i])}),e},O.omit=function(t){var e={},i=c.apply(n,a.call(arguments,1));for(var o in t)O.contains(i,o)||(e[o]=t[o]);return e},O.defaults=function(t){return T(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},O.clone=function(t){return O.isObject(t)?O.isArray(t)?t.slice():O.extend({},t):t},O.tap=function(t,e){return e(t),t};var D=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof O&&(t=t._wrapped),e instanceof O&&(e=e._wrapped);var o=h.call(t);if(o!=h.call(e))return!1;switch(o){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=i.length;r--;)if(i[r]==t)return n[r]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(O.isFunction(s)&&s instanceof s&&O.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var c=0,u=!0;if("[object Array]"==o){if(c=t.length,u=c==e.length)for(;c--&&(u=D(t[c],e[c],i,n)););}else{for(var l in t)if(O.has(t,l)&&(c++,!(u=O.has(e,l)&&D(t[l],e[l],i,n))))break;if(u){for(l in e)if(O.has(e,l)&&!c--)break;u=!c}}return i.pop(),n.pop(),u};O.isEqual=function(t,e){return D(t,e,[],[])},O.isEmpty=function(t){if(null==t)return!0;if(O.isArray(t)||O.isString(t))return 0===t.length;for(var e in t)if(O.has(t,e))return!1;return!0},O.isElement=function(t){return!(!t||1!==t.nodeType)},O.isArray=b||function(t){return"[object Array]"==h.call(t)},O.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){O["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),O.isArguments(arguments)||(O.isArguments=function(t){return!(!t||!O.has(t,"callee"))}),true&&(O.isFunction=function(t){return"function"==typeof t}),O.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},O.isNaN=function(t){return O.isNumber(t)&&t!=+t},O.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},O.isNull=function(t){return null===t},O.isUndefined=function(t){return void 0===t},O.has=function(t,e){return u.call(t,e)},O.noConflict=function(){return t._=e,this},O.identity=function(t){return t},O.times=function(t,e,i){for(var n=Array(Math.max(0,t)),o=0;t>o;o++)n[o]=e.call(i,o);return n},O.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};
L.unescape=O.invert(L.escape);var R={escape:RegExp("["+O.keys(L.escape).join("")+"]","g"),unescape:RegExp("("+O.keys(L.unescape).join("|")+")","g")};O.each(["escape","unescape"],function(t){O[t]=function(e){return null==e?"":(""+e).replace(R[t],function(e){return L[t][e]})}}),O.result=function(t,e){if(null==t)return void 0;var i=t[e];return O.isFunction(i)?i.call(t):i},O.mixin=function(t){T(O.functions(t),function(e){var i=O[e]=t[e];O.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),F.call(this,i.apply(O,t))}})};var j=0;O.uniqueId=function(t){var e=++j+"";return t?t+e:e},O.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;O.template=function(t,e,i){var n;i=O.defaults({},i,O.templateSettings);var o=RegExp([(i.escape||E).source,(i.interpolate||E).source,(i.evaluate||E).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(o,function(e,i,n,o,a){return s+=t.slice(r,a).replace(V,function(t){return"\\"+M[t]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return n(e,O);var c=function(t){return n.call(this,t,O)};return c.source="function("+(i.variable||"obj")+"){\n"+s+"}",c},O.chain=function(t){return O(t).chain()};var F=function(t){return this._chain?O(t).chain():t};O.mixin(O),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];O.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],F.call(this,i)}}),T(["concat","join","slice"],function(t){var e=n[t];O.prototype[t]=function(){return F.call(this,e.apply(this._wrapped,arguments))}}),O.extend(O.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;t.length>e;e++){var i=t[e].string,n=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(n)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"iPad",identity:"iPad"}]};BrowserDetect.init(),Actor.prototype.isOnTop=function(t){return this.evaluateFirstWhenClicked=this.overrideZIndex=!0,this.overrideZIndexExtraValue=AnimationHelper.integerValueOfOr(t,0),this},Actor.prototype.actualZIndex=function(){return this.overrideZIndex?10*(this.scene.actors.length+1)+this.overrideZIndexExtraValue:this.zIndex},Actor.prototype.comeBack=function(t){this.comesBack=!0,t===void 0&&(t=0),this.resetDelay=t},Actor.prototype.delays=function(t){this.originaldelay=t,this.delay=t},Actor.prototype.age=function(){return now()-this.startAnimationTimestamp},Actor.prototype.extraResetFunctions=[],Actor.prototype.reset=function(){this.resetBehaviors(),this.resetReactions(),this.resetStartAnimationTimestamp(),this.position={x:this.startX,y:this.startY},this.vector={x:0,y:0},this.lastVector={x:0,y:0},this.setSize(this.imagesizeX,this.imagesizeY),this.setInitialOpacity(this.originalOpacity),this.delay=this.originaldelay,this.finishedDelaying=!1,this.startedDelayingAt=null,this.tilt=0,moveActor(this),tiltActor(this);for(var t=this.extraResetFunctions.length-1;t>=0;t--)this.extraResetFunctions[t](this);this.flippinghorizontally!==void 0&&this.flippinghorizontally&&(this.image&&this.image.filters&&this.image.filters.item?this.image.style.filter="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":(this.image.style.transform+=" scaleX(-1)",this.image.style.webkitTransform+=" scaleX(-1)"))},Actor.prototype.resetStartAnimationTimestamp=function(){this.startAnimationTimestamp=now()},Actor.prototype.resetReactions=function(){for(var t=this.reactions.length-1;t>=0;t--)this.reactions[t].reset()},Actor.prototype.resetBehaviors=function(){for(var t=this.behaviors.length-1;t>=0;t--)this.behaviors[t].reset()},Actor.prototype.absolutePositionTopLeftX=Actor.prototype.absolutePositionBottomLeftX=function(){return this.position.x+this.offsetX-this.zeroOffsX},Actor.prototype.absolutePositionTopLeftY=Actor.prototype.absolutePositionTopRightY=function(){return this.position.y+this.offsetY-this.zeroOffsY},Actor.prototype.absolutePositionTopRightX=Actor.prototype.absolutePositionBottomRightX=function(){return this.imagesizeX===void 0?!1:this.position.x+this.offsetX-this.zeroOffsX+this.imagesizeX},Actor.prototype.absolutePositionBottomLeftY=Actor.prototype.absolutePositionBottomRightY=function(){return this.imagesizeY===void 0?!1:this.position.y+this.offsetY-this.zeroOffsY+this.imagesizeY},Actor.prototype.absoluteCoordinates=function(){return{origin:{x:this.absolutePositionTopLeftX()+this.rotationCenterX,y:this.absolutePositionTopLeftY()+this.rotationCenterY},topLeft:{x:this.absolutePositionTopLeftX(),y:this.absolutePositionTopLeftY()},topRight:{x:this.absolutePositionTopRightX(),y:this.absolutePositionTopRightY()},bottomRight:{x:this.absolutePositionBottomRightX(),y:this.absolutePositionBottomRightY()},bottomLeft:{x:this.absolutePositionBottomLeftX(),y:this.absolutePositionBottomLeftY()}}},Actor.prototype.logAbsoluteCoordinates=function(){var t="absolute coordinates of "+this.filename+":\n";t+="tl: "+Math.round(this.absoluteCoordinates().topLeft.x,2)+", "+Math.round(this.absoluteCoordinates().topLeft.y,2),t+=" ––––– tr: "+Math.round(this.absoluteCoordinates().topRight.x,2)+", "+Math.round(this.absoluteCoordinates().topRight.y,2),t+="\n  |                   |",t+="\n  |                   |",t+="\nbl: "+Math.round(this.absoluteCoordinates().bottomLeft.x,2)+", "+Math.round(this.absoluteCoordinates().bottomLeft.y,2),t+=" ––––– br: "+Math.round(this.absoluteCoordinates().bottomRight.x,2)+", "+Math.round(this.absoluteCoordinates().bottomRight.y,2),console.log(t)},Actor.prototype.absoluteTiltedPositionTopLeftX=function(){return rotateXaroundOriginByAngle(this.absolutePositionTopLeftX(),this.absolutePositionTopLeftY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionTopLeftY=function(){return rotateYaroundOriginByAngle(this.absolutePositionTopLeftX(),this.absolutePositionTopLeftY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionTopRightX=function(){return this.imagesizeX===void 0?(console.warn("Could not calculate top right x-coordinate of "+this.filename+" in "+this.scene.id+" because imagesize not set."),!1):rotateXaroundOriginByAngle(this.absolutePositionTopRightX(),this.absolutePositionTopRightY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionTopRightY=function(){return this.imagesizeY===void 0?(console.warn("Could not calculate top right x-coordinate of "+this.filename+" in "+this.scene.id+" because imagesize not set."),!1):rotateYaroundOriginByAngle(this.absolutePositionTopRightX(),this.absolutePositionTopRightY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionBottomRightX=function(){return this.imagesizeX===void 0?(console.warn("Could not calculate bottom right x-coordinate of "+this.filename+" in "+this.scene.id+" because imagesize not set."),!1):rotateXaroundOriginByAngle(this.absolutePositionBottomRightX(),this.absolutePositionBottomRightY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionBottomRightY=function(){return this.imagesizeY===void 0?(console.warn("Could not calculate bottom right y-coordinate of "+this.filename+" in "+this.scene.id+" because imagesize not set."),!1):rotateYaroundOriginByAngle(this.absolutePositionBottomRightX(),this.absolutePositionBottomRightY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionBottomLeftX=function(){return this.imagesizeX===void 0?(console.warn("Could not calculate bottom left x-coordinate of "+this.filename+" in "+this.scene.id+" because imagesize not set."),!1):rotateXaroundOriginByAngle(this.absolutePositionBottomLeftX(),this.absolutePositionBottomLeftY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.absoluteTiltedPositionBottomLeftY=function(){return this.imagesizeY===void 0?(console.warn("Could not calculate bottom left y-coordinate of "+this.filename+" in "+this.scene.id+" because imagesize not set."),!1):rotateYaroundOriginByAngle(this.absolutePositionBottomLeftX(),this.absolutePositionBottomLeftY(),this.rotationCenterX+this.absolutePositionTopLeftX(),this.rotationCenterY+this.absolutePositionTopLeftY(),this.tilt*Math.PI/180)},Actor.prototype.tiltedCoordinates=function(){return{origin:{x:this.absoluteTiltedPositionTopLeftX()+this.rotationCenterX,y:this.absoluteTiltedPositionTopLeftY()+this.rotationCenterY},topLeft:{x:this.absoluteTiltedPositionTopLeftX(),y:this.absoluteTiltedPositionTopLeftY()},topRight:{x:this.absoluteTiltedPositionTopRightX(),y:this.absoluteTiltedPositionTopRightY()},bottomRight:{x:this.absoluteTiltedPositionBottomRightX(),y:this.absoluteTiltedPositionBottomRightY()},bottomLeft:{x:this.absoluteTiltedPositionBottomLeftX(),y:this.absoluteTiltedPositionBottomLeftY()}}},Actor.prototype.tiltedCoordinatesText=function(){var t="";return t+=" topLeft: "+Math.round(this.tiltedCoordinates().topLeft.x,2)+", "+Math.round(this.tiltedCoordinates().topLeft.y,2),t+=" | topRight: "+Math.round(this.tiltedCoordinates().topRight.x,2)+", "+Math.round(this.tiltedCoordinates().topRight.y,2),t+=" | bottomLeft: "+Math.round(this.tiltedCoordinates().bottomLeft.x,2)+", "+Math.round(this.tiltedCoordinates().bottomLeft.y,2),t+=" | bottomRight: "+Math.round(this.tiltedCoordinates().bottomRight.x,2)+", "+Math.round(this.tiltedCoordinates().bottomRight.y,2)},Actor.prototype.pointIsAboveActor=function(t,e){var i=Math.min(this.tiltedCoordinates().topLeft.x,this.tiltedCoordinates().topRight.x,this.tiltedCoordinates().bottomLeft.x,this.tiltedCoordinates().bottomRight.x),n=Math.max(this.tiltedCoordinates().topLeft.x,this.tiltedCoordinates().topRight.x,this.tiltedCoordinates().bottomLeft.x,this.tiltedCoordinates().bottomRight.x),o=t>=i&&n>=t,r=Math.min(this.tiltedCoordinates().topLeft.y,this.tiltedCoordinates().topRight.y,this.tiltedCoordinates().bottomLeft.y,this.tiltedCoordinates().bottomRight.y),s=Math.max(this.tiltedCoordinates().topLeft.y,this.tiltedCoordinates().topRight.y,this.tiltedCoordinates().bottomLeft.y,this.tiltedCoordinates().bottomRight.y),a=e>=r&&s>=e;return o&&a},Actor.prototype.showCorners=function(){this.showsCorners=!0,this.topLeft=redDot(this.scene,this.absoluteTiltedPositionTopLeftX(),this.absoluteTiltedPositionTopLeftY(),this.layer),this.topRight=redDot(this.scene,this.absoluteTiltedPositionTopRightX(),this.absoluteTiltedPositionTopRightY(),this.layer),this.bottomLeft=redDot(this.scene,this.absoluteTiltedPositionBottomLeftX(),this.absoluteTiltedPositionBottomLeftY(),this.layer),this.bottomRight=redDot(this.scene,this.absoluteTiltedPositionBottomRightX(),this.absoluteTiltedPositionBottomRightY(),this.layer)},Actor.prototype.updateCorners=function(){this.topLeft.position={x:this.absoluteTiltedPositionTopLeftX()+this.scene.scrollPositionX,y:this.absoluteTiltedPositionTopLeftY()+this.scene.scrollPositionY},this.topRight.position={x:this.absoluteTiltedPositionTopRightX()+this.scene.scrollPositionX,y:this.absoluteTiltedPositionTopRightY()+this.scene.scrollPositionY},this.bottomLeft.position={x:this.absoluteTiltedPositionBottomLeftX()+this.scene.scrollPositionX,y:this.absoluteTiltedPositionBottomLeftY()+this.scene.scrollPositionY},this.bottomRight.position={x:this.absoluteTiltedPositionBottomRightX()+this.scene.scrollPositionX,y:this.absoluteTiltedPositionBottomRightY()+this.scene.scrollPositionY}},Actor.prototype.setPhaseCycleLength=function(t){this.phaseCycle=t},Actor.prototype.currentPhase=function(){var t=0,e=this.phases.length;if(e>1){var i=now()-this.enteredAt,n=this.phaseCycle/e,o=i%(e*n);t=parseInt(o/n,10)}return t},Actor.prototype.extraResetFunctions.push(function(t){t.syncs()&&keyOr(t.synckey+"-visibleForever",!1)?setVisible(t):t.syncs()&&keyOr(t.synckey+"-invisibleForever",!1)?setInvisible(t):t.currentlyVisible!==void 0||(t.originalOpacity=t.currentOpacity=1,t.currentlyVisible=!0),t.originalOpacity=t.currentOpacity=keyOr(t.synckey+"-originalOpacity",1)}),Actor.prototype.alterOpacity=function(t){return t!==this.currentOpacity&&(this.currentOpacity=t,this.image.style.opacity=this.currentOpacity,this.image.style.filter="alpha(opacity="+100*this.newOpacity+")"),this},Actor.prototype.setInitialOpacity=function(t){return t>0&&setVisible(this),this.originalOpacity=t,this.alterOpacity(t),this};var Reaction=function(t,e,i){if(this.actor=paramOrVariable(t,"actor",t),this.actor===void 0)throw"Plugin needs actor to be properly created.";return this.reactioncode=paramOrVariable(t,"reactioncode",e),this.reactHowOften=i,this.runs=this.actor.syncs()?keyOr(this.actor.synckey+"_resetcounter",0):0,(notNumeric(this.reactHowOften)||0>this.reactHowOften)&&(this.reactHowOften=0),this.reset=function(){this.runs=this.actor.syncs()?keyOr(this.actor.synckey+"_resetcounter",0):0},this};Actor.prototype.react=function(){for(var i=0;this.reactions.length>i;i++){var myReaction=this.reactions[i];(0===myReaction.reactHowOften||myReaction.runs<myReaction.reactHowOften)&&(eval(myReaction.reactioncode.replace("reactionTargetIndex",i)),myReaction.runs++,this.syncs()&&updateKey(this.synckey+"_resetcounter",myReaction.runs))}},Actor.prototype.reacts=function(t,e,i){if(this.addClass("reacts"),notNumeric(this.imagesize.x))return console.error("Actor "+this.filename+" in "+this.scene.id+" has no width set and can therefore not react."),void 0;if(notNumeric(this.imagesize.y))return console.error("Actor "+this.filename+" in "+this.scene.id+" has no height set and can therefore not react."),void 0;i=i===void 0?this:i;var n=new Reaction(this,t,e,i);this.reactions.push(n),this.reactionTargets.push(i)},Scene.prototype.extraResetFunctions=[],Scene.prototype.reset=function(){console.log('resetting scene "'+this.id+'"'),this.resetActors(),this.resetAge();for(var t=this.extraResetFunctions.length-1;t>=0;t--)this.extraResetFunctions[t](this);return this},Scene.prototype.resetActors=function(){for(var t=this.actors.length-1;t>=0;t--)this.actors[t].reset();return this},Scene.prototype.resetAge=function(){return this.displayedAt=Date.now(),this},Actor.prototype.navigatesOnTouch=function(t){this.reacts("window.animation.showScene('"+t+"')",0),this.addClass("navigation"),this.scene.preloadSceneIds.push(t)},Actor.prototype.navigatesAndLoadsOnTouch=function(t){this.reacts("window.animation.loadAndShow('"+t+"')",0),this.image.className+="navigation"},Actor.prototype.dontWaitForMeWhenLoading=!1,Actor.prototype.ignoreInLoader=function(){this.dontWaitForMeWhenLoading=!0},Actor.prototype.hasLoaded=function(){return!1},Scene.prototype.namesOfLoadingActors=function(){for(var t=[],e=this.actors.length-1;e>=0;e--)this.actors[e].dontWaitForMeWhenLoading||this.actors[e].hasLoaded()||t.push(this.actors[e].filename+" ("+this.actors[e].actortype+")");return t},Scene.prototype.numberOfLoadedActors=function(){for(var t=0,e=this.actors.length-1;e>=0;e--)this.actors[e].dontWaitForMeWhenLoading||this.actors[e].hasLoaded()?t++:console.log("Waiting for actor "+this.actors[e].filename+" to load.");return t},Scene.prototype.loadedPercentage=function(){return 0===this.actors.length?100:Math.round(100*(this.numberOfLoadedActors()/this.actors.length))},Scene.prototype.hasLoaded=function(){return 100===this.loadedPercentage()},Scene.prototype.createActor=function(t,e,i,n,o){n!==void 0&&o===void 0&&console.error("Missing height-value for "+t+" in "+this.id+", please set both. (Browsers deal with the missing height value differently.)");var r=new Actor(e,i,n,o);r.scene=this,r.actortype="image";var s=onLocalhost()||!this.animation.config.cdnDomain?"images/":this.animation.config.cdnDomain+"/images/";return r.setup=function(){r.image=document.createElement("img"),r.image.originalPath=t,r.filename=t.substring(t.lastIndexOf("/")+1),r.image.setAttribute("src",relativeOrAbsolutePath(s,r.image.originalPath)),r.image.setAttribute("class","actor"),this.image.setAttribute("draggable","false"),r.image.actor=r,r.phases.push(relativeOrAbsolutePath(s,t)),r.defaultdirectory=s,r.position={x:e,y:i},r.setSize(n,o),r.vector={x:0,y:0},bindEvent(r.image,"load",function(){r.hasLoaded=function(){return!0},this.removeEventListener("load",arguments.callee)}),moveActor(r)},r.setup(),r.scene=this,this.addActor(r),r},Actor.prototype.addPhase=function(t){var e=document.createElement("img");e.setAttribute("src",relativeOrAbsolutePath(this.defaultdirectory,t)),e.setAttribute("draggable","false"),this.phases.push(relativeOrAbsolutePath(this.defaultdirectory,t))},Scene.prototype.createVideoActor=function(t,e,i,n,o){var r=new Actor(e,i,n,o);r.actortype="video";var s="video/";return r.filename=t,r.setup=function(){r.image=document.createElement("video"),r.image.originalPath=t,r.filename=t.substring(t.lastIndexOf("/")+1),ismobile()&&r.image.setAttribute("controls","controls");var a=r.image.appendChild(document.createElement("source"));a.setAttribute("type","video/mp4"),a.setAttribute("src",relativeOrAbsolutePath(s,r.image.originalPath)+".mp4"),a=r.image.appendChild(document.createElement("source")),a.setAttribute("type","video/webm"),a.setAttribute("src",relativeOrAbsolutePath(s,r.image.originalPath)+".webm"),r.image.actor=r,r.defaultdirectory=s,r.position={x:e,y:i},r.setSize(n,o),r.vector={x:0,y:0},bindEvent(r.image,"mousedown",function(){r.react()}),bindEvent(r.image,"canplay",function(){r.hasLoaded=function(){return!0},this.removeEventListener("canplay",arguments.callee)}),moveActor(r)},r.setup(),r.scene=this,this.addActor(r),r},Scene.prototype.createVimeoActor=function(t,e,i,n,o){var r=new Actor(e,i,n,o);return r.actortype="vimeo",r.filename="Vimeo video #"+t,r.setup=function(){r.image=document.createElement("iframe"),r.image.originalPath=t,r.image.setAttribute("src","http://player.vimeo.com/video/"+t+"?portrait=0&byline=0&portrait=0&api=1&title=0&player_id="+t+"&color=333"),r.image.setAttribute("width",n),r.image.setAttribute("height",o),r.image.setAttribute("frameborder","0"),r.image.setAttribute("webkitAllowFullScreen",""),r.image.setAttribute("mozallowfullscreen",""),r.image.setAttribute("allowFullScreen",""),r.image.actor=r,r.position={x:e,y:i},r.setSize(n,o),r.vector={x:0,y:0},bindEvent(r.image,"mousedown",function(){r.react()}),moveActor(r)},r.setup(),r.scene=this,this.addActor(r),r.hasLoaded=function(){return!0},r},Scene.prototype.createPopUpActor=function(t,e,i,n,o){var r=new Actor(e,i,n,o);return r.filename=r.URI=t,r.actortype="popup",r.setup=function(){r.image=document.createElement("IFRAME"),r.image.setAttribute("class","popupiframe"),r.image.setAttribute("src",r.URI),r.image.actor=r,r.position={x:e,y:i},r.setSize(n,o),r.vector={x:0,y:0},r.hasLoaded=function(){return!0},moveActor(r)},r.setup(),r.scene=this,this.addActor(r),r},Actor.prototype.addBehavior=function(t){try{t.reset()}catch(e){}return this.behaviors.push(t),this},Actor.prototype.cleanupBehaviors=function(){for(var t=this.behaviors.length-1;t>=0;t--)this.behaviors[t].cleanup()},Actor.prototype.removeBehaviorsThatCameFromReacts=function(){for(var t=[],e=this.behaviors.length-1;e>=0;e--)this.behaviors[e].triggeredByAction||t.push(this.behaviors[e]);this.behaviors.length!==t.length&&(this.behaviors=t)},bindEvent(window,"click",handleClick),Actor.prototype.isInLayer=function(t){return this.layer=t,this.scene.layers===void 0&&(this.scene.layers=[]),this.scene.layers[t]===void 0&&(this.scene.layers[t]=[]),this.scene.layers[t].push(this),this},Scene.prototype.scrollingPerspective=function(t,e){this.neutralLayer=t===void 0?10:t,this.horizonLayer=e===void 0?0:e,this.layerMultiplier=1/(this.neutralLayer-this.horizonLayer)},Scene.prototype.setPerspective=function(t,e){if(this.layers)for(var i=0;this.layers.length>i;i++)if(this.layers[i]!==void 0)for(var n=1-(this.neutralLayer-i)*this.layerMultiplier,o=this.layers[i].length-1;o>=0;o--){var r=this.layers[i][o];t&&(0===r.zeroOffsX&&(r.zeroOffsX=i>=this.horizonLayer?t*n:-(t*n)),r.offsetX=t*n,r.needsMoving=!0),e&&(0===r.zeroOffsY&&(r.zeroOffsY=i>=this.horizonLayer?e*n:-(2*e*n)),r.offsetY=e*n,r.needsMoving=!0)}},Actor.prototype.shiftsPerspective=function(t,e){return this.scene.shiftPerspective(t,e),this},Actor.prototype.shiftsPerspectiveOnTouch=function(t,e){return this.reacts("this.shiftsPerspective("+t+", "+e+", true, reactionTargetIndex)",0),this},Scene.prototype.shiftPerspective=function(t,e){for(var i=0;this.layers.length>i;i++)if(this.layers[i]!==void 0)for(var n=this.layers[i].length-1;n>=0;n--){var o=this.layers[i][n];t&&(o.offsetX+=t*(i-1),o.needsMoving=!0),e&&(o.offsetY+=e*(i-1),o.needsMoving=!0)}},Scene.prototype.scrollingActors=[],Scene.prototype.hideLeftScrolling=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].direction!==void 0&&"left"===this.scrollingActors[e].direction&&this.scrollingActors[e].currentlyVisible&&this.scrollingActors[e].dissolves(0,500);return this},Scene.prototype.hideRightScrolling=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].direction!==void 0&&"right"===this.scrollingActors[e].direction&&this.scrollingActors[e].currentlyVisible&&this.scrollingActors[e].dissolves(0,500);return this},Scene.prototype.showLeftScrolling=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].direction!==void 0&&"left"===this.scrollingActors[e].direction&&(this.scrollingActors[e].currentlyVisible||this.scrollingActors[e].appears(0,500));return this},Scene.prototype.showRightScrolling=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].direction!==void 0&&"right"===this.scrollingActors[e].direction&&(this.scrollingActors[e].currentlyVisible||this.scrollingActors[e].appears(0,500));return this},Scene.prototype.hideScrolling=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].dissolves(0,t);return this},Actor.prototype.hideScrolling=function(t){return t===void 0&&(t=1e3),this.scene.hideScrolling(t),this},Scene.prototype.showScrolling=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].appears(0,t);return this},Actor.prototype.showScrolling=function(t){return t===void 0&&(t=1e3),this.scene.showScrolling(t),this},Scene.prototype.hideScrollingForever=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].dissolvesForever(0,t);return this},Actor.prototype.hideScrollingForever=function(t){return t===void 0&&(t=1e3),this.scene.hideScrollingForever(t),this},Scene.prototype.showScrollingForever=function(t){t===void 0&&(t=1e3);for(var e=this.scrollingActors.length-1;e>=0;e--)this.scrollingActors[e].appears(0,t);return this},Actor.prototype.showScrollingForever=function(t){return t===void 0&&(t=1e3),this.scene.showScrollingForever(t),this},Actor.prototype.hidesScrollingOnTouch=function(t){return t===void 0&&(t=1e3),this.reacts("this.scene.hideScrolling("+parseInt(t,10)+");",0,this),this},Actor.prototype.showsScrollingOnTouch=function(t){return t===void 0&&(t=1e3),this.reacts("this.scene.showScrolling("+parseInt(t,10)+");",0,this),this},Actor.prototype.hidesScrollingForeverOnTouch=function(t){return t===void 0&&(t=1e3),this.reacts("this.scene.hideScrollingForever("+parseInt(t,10)+");",0,this),this},Actor.prototype.showsScrollingForeverOnTouch=function(t){return t===void 0&&(t=1e3),this.reacts("this.scene.showScrollingForever("+parseInt(t,10)+");",0,this),this},Actor.prototype.scrollsTo=function(t,e,i,n,o){n=n===void 0?!1:n;var r=new ScrollingTo(this,t,e,i,n,o);return this.addBehavior(r),this},Actor.prototype.scrollsToOnTouch=function(t,e,i){return this.reacts("this.scrollsTo("+t+","+e+","+i+", false, true, reactionTargetIndex);",0),this},Scene.prototype.getScrollAmountX=function(t,e){var i=1-(this.neutralLayer-e)*this.layerMultiplier;return t/i},Scene.prototype.getScrollAmountY=function(t,e){var i=1-(this.neutralLayer-e)*this.layerMultiplier;return t/i},Actor.prototype.scrollsToOnTouch3=function(t,e,i,n){return this.reacts("this.scrollsTo("+this.scene.getScrollAmountX(t,i)+","+this.scene.getScrollAmountY(e,i)+","+n+", true, reactionTargetIndex);",0),this},Actor.prototype.scrollsBy=function(t,e,i,n,o){n=n===void 0?!1:n;var r=new ScrollingBy(this,t,e,i,n,o);return this.addBehavior(r),this},Actor.prototype.scrollsByOnTouch=function(t,e,i){return this.scene.scrollingActors.push(this),this.reacts("this.scrollsBy("+-t+","+-e+","+i+", false, true, reactionTargetIndex);",0),this},Scene.prototype.getScrollAmountX=function(t,e){var i=1-(this.neutralLayer-e)*this.layerMultiplier;return t/i},Scene.prototype.getScrollAmountY=function(t,e){var i=1-(this.neutralLayer-e)*this.layerMultiplier;return t/i},Actor.prototype.scrollsHorizontalOnHover=function(t,e,i){if("iPad"!==BrowserDetect.OS){var n=new ScrollingOnHover(this,t,e,i,!1,0);this.addBehavior(n),bindEvent(this.image,"mouseover",function(){n.active=!0}),bindEvent(this.image,"mouseout",function(){n.active=!1,n.currentSpeed=t})}},Actor.prototype.evaluatesOnCreate=function(t,e,i){var n=new EvaluatingOnCreate(this,t,e,i);return this.addBehavior(n),this},Actor.prototype.evaluatesOnTouch=function(t){return this.reacts("this.evaluatesOnCreate("+t+")",0),this},Actor.prototype.waves=function(t,e,i,n){return this.addBehavior(new Waving(this,t,e,i,n)),this},Actor.prototype.appears=function(t,e,i,n,o,r){var s=new Appearing(this,t,e,i,n,o);return n!==void 0&&(s.triggeredByAction=n),r!==void 0&&r&&(s.sync=!0),this.addBehavior(s),this},Actor.prototype.appearsForever=function(t,e,i,n,o){this.appears(t,e,i,n,o,!0)},Actor.prototype.appearsOnTouch=function(t,e){return this.setInitialOpacity(0),this.reacts("this.appears("+AnimationHelper.integerValueOfOr(e,0)+","+t+", true, false, reactionTargetIndex);",0),this},Actor.prototype.appearsForeverOnTouch=function(t,e){return this.setInitialOpacity(0),this.reacts("this.appearsForever("+AnimationHelper.integerValueOfOr(e,0)+","+t+", true, false, reactionTargetIndex);",0),this},Actor.prototype.letsAppearStartsVisible=function(t,e,i){return this.reacts("this.appears("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", true, true, reactionTargetIndex);",0,t),this},Actor.prototype.letsAppearForeverStartsVisible=function(t,e,i){return this.reacts("this.appearsForever("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", true, true, reactionTargetIndex);",0,t),this},Actor.prototype.letsAppear=function(t,e,i){return this.extraResetFunctions.push(function(){setInvisible(t)}),this.reacts("this.appears("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", false, true, reactionTargetIndex);",0,t),this},Actor.prototype.letsAppearForever=function(t,e,i){return setInvisible(t),this.reacts("this.appearsForever("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", false, true, reactionTargetIndex);",1,t),this},Actor.prototype.letsAppearsForeverSynced=function(t,e){return e===void 0&&(howoften=1),this.reacts("syncVisibleByKey('"+t+");",e),this},Actor.prototype.moves=function(t,e,i,n,o,r){return this.addBehavior(new Moving(this,t,e,i,n,o,r)),this},Actor.prototype.movesOnTouch=function(t,e,i,n,o,r){var s=t+","+e;return i!==void 0&&(s+=", "+i),n!==void 0&&(s+=", "+n),o!==void 0&&(s+=", "+o),r!==void 0&&(s+=", "+r),this.reacts("this.moves("+s+");"),this},Actor.prototype.movesTo=function(t,e,i,n,o,r){o=o===void 0?!1:o;var s=new MovingTo(this,t,e,i,n,o,r);return this.addBehavior(s),this},Actor.prototype.movesToOnTouch=function(t,e,i,n){return this.reacts("this.movesTo("+t+","+e+","+i+","+n+", true, reactionTargetIndex);",0),this},Actor.prototype.letsMoveTo=function(t,e,i,n,o){return this.reacts("this.movesTo("+e+","+i+","+n+","+o+", true, reactionTargetIndex);",0,t),this},Actor.prototype.movesToOnTouch=function(t,e,i,n){return this.reacts("this.movesTo("+t+","+e+","+i+","+n+", true, reactionTargetIndex);",0),this},Actor.prototype.swings=function(t,e,i,n,o,r,s){return this.addBehavior(new Swinging(this,t,e,i,n,o,r,s)),this},Actor.prototype.pulsates=function(t,e,i,n,o){console.log("Actor.prototype.pulsates");var r=new Pulsating(this,t,e,i,n,o);return this.addBehavior(r),this},Actor.prototype.pulsatesOnTouch=function(t,e,i,n){return this.reacts("this.pulsates("+t+", "+e+", "+i+", true, reactionTargetIndex);",n),this},Actor.prototype.letsPulsate=function(t,e,i,n,o){return this.reacts("this.pulsates("+e+", "+i+", "+n+", true, reactionTargetIndex);",o,t),this},Actor.prototype.dissolves=function(t,e,i,n,o){var r=new Dissolving(this,t,e,i,n);return i!==void 0&&(r.triggeredByAction=i),o!==void 0&&o&&(r.sync=!0),this.addBehavior(r),this},Actor.prototype.dissolvesForever=function(t,e,i,n){return this.dissolves(t,e,i,n,!0),this},Actor.prototype.dissolvesOnTouch=function(t,e){return this.reacts("this.dissolves("+AnimationHelper.integerValueOfOr(e,0)+", "+AnimationHelper.floatValueOfOr(t,1e3)+", true, reactionTargetIndex);",0),this},Actor.prototype.dissolvesForeverOnTouch=function(t,e){return this.reacts("this.dissolvesForever("+AnimationHelper.integerValueOfOr(e,0)+", "+AnimationHelper.floatValueOfOr(t,1e3)+", true, reactionTargetIndex);",0),this},Actor.prototype.letsDissolveForever=function(t,e,i){return this.reacts("this.dissolvesForever("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", true, reactionTargetIndex);",0,t),this
},Actor.prototype.letsDissolve=function(t,e,i){return this.reacts("this.dissolves("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", true, reactionTargetIndex);",0,t),this},Actor.prototype.letsForeverDissolve=function(t,e,i){return this.reacts("this.dissolvesForever("+AnimationHelper.integerValueOfOr(i,0)+", "+AnimationHelper.floatValueOfOr(e,1e3)+", true, reactionTargetIndex);",0,t),this},Actor.prototype.rotates=function(t,e,i,n){e===void 0&&(e=0);var o=new Rotating(this,t,e,i,n);return this.addBehavior(o),this},Actor.prototype.rotatesOnTouch=function(t,e,i){return e===void 0&&(e=0),this.reacts("this.rotates("+t+", "+e+", true, reactionTargetIndex);",i),this},Actor.prototype.togglesRotationOnTouch=function(t,e,i){return e===void 0&&(e=0),this.reacts("this.rotates("+t+", "+e+", true, reactionTargetIndex);",i),this},Actor.prototype.letsRotate=function(t,e,i,n){return i===void 0&&(i=0),this.reacts("this.rotates("+e+", "+i+", true, reactionTargetIndex);",n,t),this},Actor.prototype.plays=function(t,e){var i=this;return setTimeout(function(){i.addBehavior(new Playing(i,t,e,!1,!1))},500),this},Actor.prototype.playsSolo=function(t,e){var i=this;this.soloPlayer=!0;var n=new Playing(i,t,e,!1,!1);return setTimeout(function(){i.addBehavior(n)},500),this},Actor.prototype.playsAndExecutesOnStop=function(t,e,i){var n=this,o=new Playing(n,t,e,!1,!1,!1,i);return setTimeout(function(){n.addBehavior(o)},500),this},Actor.prototype.playsLoop=function(t,e,i){var n=this,o=new Playing(n,t,e,!0,!1,i);return setTimeout(function(){n.addBehavior(o)},500),this},Actor.prototype.playsBackground=function(t,e,i){var n=this;this.backgroundPlayer=!0;var o=new Playing(n,t,e,!0,!0,i);return setTimeout(function(){n.addBehavior(o)},500),this},Actor.prototype.playsAndPulsates=function(t,e){var i=this,n=new Playing(i,t,e);return i.pulsatesWhilePlaying=!0,setTimeout(function(){i.addBehavior(n)},500),this},Scene.prototype.mute=function(){for(var t=0;this.actors.length>t;t++)try{this.actors[t].pauseAudio()}catch(e){}},Scene.prototype.muteNonBackground=function(){for(var t=0;this.actors.length>t;t++)try{void 0!==this.soloPlayer&&this.soloPlayer||void 0!==this.actors[t].backgroundPlayer&&this.actors[t].backgroundPlayer||this.actors[t].pauseAudio(!1)}catch(e){}},Scene.prototype.muteOthers=function(){for(var t=window.animation.loadedScenes.length-1;t>=0;t--)window.animation.loadedScenes[t].id.match(this.id)||window.animation.loadedScenes[t].mute()},Actor.prototype.stopsPlaying=function(t,e){return new StopPlaying(this,t,e),this},Actor.prototype.letsStopPlaying=function(t){return console.log("TARGET: "+t.filename),this.reacts("this.stopsPlaying(true, reactionTargetIndex);",1,t),this},Actor.prototype.startsPlaying=function(t,e){return new StartsPlaying(this,t,e),this},Actor.prototype.letsStartPlaying=function(t){return this.reacts("this.startsPlaying(true, reactionTargetIndex);",1,t),this},Actor.prototype.drifts=function(t,e,i,n){return this.addBehavior(new Drifting(this,t,e,i,n)),this},Actor.prototype.driftsOnTouch=function(t,e){return this.reacts("this.drifts("+t+","+e+", true, reactionTargetIndex);",1),this},Actor.prototype.letsDrift=function(t,e,i){return this.reacts("this.drifts("+e+","+i+", true, reactionTargetIndex);",1,t),this},Actor.prototype.shakes=function(t,e,i,n,o){return this.addBehavior(new Shaking(this,t,e,i,n,o)),this},Actor.prototype.shakesOnTouch=function(t,e,i,n){return n=n===void 0?1:n,this.reacts("this.shakes("+t+","+e+","+i+");",n),this},Actor.prototype.letsShake=function(t,e,i,n,o){return o=o===void 0?1:o,this.reacts("this.shakes("+e+","+i+","+n+", true, reactionTargetIndex  );",o,t),this},Actor.prototype.links=function(t,e){return e!==void 0&&(e="_blank"),this.addBehavior(new Linking(this,t,e)),this},Actor.prototype.linksToNewWindow=function(t){return this.addBehavior(new Linking(this,t,"_blank")),this},Actor.prototype.linksToSameWindow=function(t){return this.addBehavior(new Linking(this,t,"_self")),this},Actor.prototype.triggerResetReactions=function(t,e){return this.reactionTargets[e].resetReactions(),this.reactionTargets[e].removeBehaviorsThatCameFromReacts(),this},Actor.prototype.letsResetReactions=function(t){return this.reacts("this.triggerResetReactions(true, reactionTargetIndex)",1,t),this},Actor.prototype.triggerResetBehaviors=function(t,e){return this.reactionTargets[e].resetBehaviors(),this},Actor.prototype.letsResetBehaviors=function(t){return this.reacts("this.triggerResetBehaviors(true, reactionTargetIndex)",1,t),this},Actor.prototype.toggle=function(){return this.scene.textDisplaying?(this.image.src="images/"+this.textToggleAlternativeImagePath,this.scene.hideText()):(this.image.src="images/"+this.image.originalPath,this.scene.showText()),this},Actor.prototype.togglesTextOnTouch=function(t){return this.textToggleAlternativeImagePath=t,this.reacts("this.toggle();"),this},Actor.prototype.passesTouchThrough=function(){return this.passesTouchThroughSet=!0,this.image.style.pointerEvents="none",this},Actor.prototype.clonesMovement=function(t,e,i,n,o){return this.addBehavior(new MovementCloning(this,t,e,i,n,o)),this},Actor.prototype.initializeCounterIfNeeded=function(t){console.log("initializing counter "+this.filename),this.counterInitialized===void 0&&(this.addBehavior(new CountResetter(this)),t!==void 0&&(this.counterInitialAmount=t),this.syncs()?(this.counter=parseInt(keyOr(this.synckey+"-counter",AnimationHelper.integerValueOfOr(t||0)),10),console.log("got value: "+this.counter)):this.counter=AnimationHelper.integerValueOfOr(t||0),this.counterInitialized=!0,this.onMinimumReactions=[],this.onExactReactions=[])},Actor.prototype.actOnReactions=function(){for(var t=0;this.onMinimumReactions.length>t;t++)this.counter>=this.onMinimumReactions[t][0]&&this.onMinimumReactions[t][1]();for(var e=0;this.onExactReactions.length>e;e++)this.counter===this.onExactReactions[e][0]&&this.onExactReactions[e][1]()},Actor.prototype.reactOnMinimum=function(t,e){this.onMinimumReactions.push([t,e])},Actor.prototype.reactOnEqual=function(t,e){this.onExactReactions.push([t,e])},Actor.prototype.autosetCountertext=function(){return this.textDiv!==void 0&&this.originalText.indexOf("%count%")>=0?this.setText(this.originalText.replace("%count%",this.counter)):this.setText(this.counter),this.syncs&&updateKey(this.synckey+"-counter",this.counter),this},Actor.prototype.addsToCounter=function(t,e,i){console.log("adding to counter");var n=e?this.reactionTargets[i]:this;return n.counter=parseInt(n.counter,10)+t,n.autosetCountertext(),n.actOnReactions(),this},Actor.prototype.letsAddToCounter=function(t,e,i){return i===void 0&&(i=0),t.initializeCounterIfNeeded(),this.reacts("this.addsToCounter("+e+", true, reactionTargetIndex);",i,t),this},Actor.prototype.multipliesCounter=function(t,e,i){var n=e?this.reactionTargets[i]:this;return n.counter=parseInt(n.counter,10)*t,n.autosetCountertext(),this},Actor.prototype.letsMultiply=function(t,e){return t.initializeCounterIfNeeded(),this.reacts("this.multipliesCounter("+e+", true, reactionTargetIndex);",0,t),this},Actor.prototype.setText=function(t,e,i,n,o){return this.textDiv===void 0?this.addBehavior(new HavingText(this,t,e,i,n,o)):this.textDivInner.innerHTML=t,this},Actor.prototype.multichoices=function(t,e){return this.addBehavior(new Multichoicing(this,t,e)),this},Actor.prototype.isQuestion=function(t,e,i,n,o,r,s,a){this.rightanswers=t,this.wronganswers=e,setInvisible(i);for(var c=t.length-1;c>=0;c--){a?t[c].letsAppear(i,1):t[c].letsAppearAsQuestion(i,1),t[c].letsChangeImageSrc(this,n),t[c].plays(r,n),t[c].letsChangeImageSrc(t[c],n),setInvisible(t[c]);for(var h=e.length-1;h>=0;h--)t[h].letsDissolve(e[h])}for(var u=e.length-1;u>=0;u--)setInvisible(e[u]);for(var l=e.length-1;l>=0;l--)e[l].letsChangeImageSrc(e[l],o),e[l].plays(s,o)},Actor.prototype.isLastQuestion=function(t,e,i,n,o,r,s){return this.isQuestion(t,e,i,n,o,r,s,!0),this},Actor.prototype.appearsAsQuestion=function(t,e){return this.addBehavior(new AppearingAsQuestion(this,t,e)),this},Actor.prototype.letsAppearAsQuestion=function(t){return this.reacts("this.appearsAsQuestion(true, reactionTargetIndex);",1,t),this},Actor.prototype.changesImageSrc=function(t,e,i){this.addBehavior(new ChangingImageSrc(this,t,e,i))},Actor.prototype.changesImageSrcOnTouch=function(t){this.reacts("this.changesImageSrc('"+t+"', true, reactionTargetIndex);",1)},Actor.prototype.letsChangeImageSrc=function(t,e){this.reacts("this.changesImageSrc('"+e+"', true, reactionTargetIndex);",1,t)},Actor.prototype.circles=function(t,e,i,n){this.addBehavior(new Circling(this,t,e,!1,i,n))},Actor.prototype.circlesWithTilt=function(t,e,i,n){this.addBehavior(new Circling(this,t,e,!0,i,n))},Actor.prototype.hasPopup=function(t,e,i,n,o,r,s,a){return this.addBehavior(new Popup(this,t,e,i,n,o,r,s,a)),this},Actor.prototype.hasPopupOnTouch=function(t,e,i,n,o,r){return this.reacts("this.hasPopup('"+t+"', "+e+", "+i+", "+n+", "+o+", "+r+", true, reactionTargetIndex);",0),this},Actor.prototype.bounces=function(t,e,i,n,o,r){return this.addBehavior(new Bouncing(this,t,e,i,n,o,r)),this},Actor.prototype.bouncesOnTouch=function(t,e,i,n){return this.reacts("this.bounces("+t+","+e+","+i+","+n+", true, reactionTargetIndex);",0),this},Actor.prototype.letsBounce=function(t,e,i,n,o){return this.reacts("this.bounces("+e+","+i+","+n+","+o+", true, reactionTargetIndex);",1,t),this},Actor.prototype.triggerOnEvent=function(t,e){bindEvent(this.image,e,function(){t.react()})},Actor.prototype.playvideo=function(t,e,i,n,o){var r=new PlayVideo(this,t,e,i,n,o);return n!==void 0&&(r.triggeredByAction=n),this.addBehavior(r),this},Actor.prototype.playvideoOnTouch=function(t,e,i){return this.reacts("this.playvideo("+t+","+e+", "+i+", true, reactionTargetIndex);",1),this},Actor.prototype.letsPlayvideo=function(t,e,i,n){return this.reacts("this.playvideo("+e+","+i+", "+n+", true, reactionTargetIndex);",1,t),this},Actor.prototype.pausevideo=function(t,e,i){var n=new PauseVideo(this,t,e,i);return e!==void 0&&(n.triggeredByAction=e),this.addBehavior(n),this},Actor.prototype.pausevideoOnTouch=function(t){return this.reacts("this.pausevideo("+t+", true, reactionTargetIndex);",1),this},Actor.prototype.letsPausevideo=function(t,e){return this.reacts("this.pausevideo("+e+", true, reactionTargetIndex);",1,t),this},Actor.prototype.playvimeo=function(t,e){var i=new PlayVimeo(this,t,e);return t!==void 0&&(i.triggeredByAction=t),this.addBehavior(i),this},Actor.prototype.playvimeoOnTouch=function(){return this.reacts("this.playvimeo(true, reactionTargetIndex);",0),this},Actor.prototype.letsPlayvimeo=function(t){return this.reacts("this.playvimeo(true, reactionTargetIndex);",0,t),this},Actor.prototype.pausevimeo=function(t,e){var i=new PauseVimeo(this,t,e);return t!==void 0&&(i.triggeredByAction=t),this.addBehavior(i),this},Actor.prototype.pausevimeoOnTouch=function(){return this.reacts("this.pausevimeo(true, reactionTargetIndex);",0),this},Actor.prototype.letsPausevimeo=function(t){return this.reacts("this.pausevimeo(true, reactionTargetIndex);",0,t),this},Actor.prototype.setSynckey=function(t){var e=t.match(/[A-Za-z\-_0-9]/g).join("");return e!==t&&console.warn(t+" uses characters not acceptable in Synckey, was changed to "+e+"."),t=e,this.synckey=t,this},Actor.prototype.syncs=function(){return this.synckey!==void 0},Actor.prototype.scrollPopUp=function(t,e,i,n){i=i===void 0?!1:i;var o=new ScrollPopUp(this,t,e,i,n);return this.addBehavior(o),this},Actor.prototype.letsScrollPopUpOnTouch=function(t,e,i){return this.reacts("this.scrollPopUp("+e+","+i+", true, reactionTargetIndex);",0,t),this},Actor.prototype.scrollText=function(t,e,i,n){i=i===void 0?!1:i;var o=new ScrollText(this,t,e,i,n);return this.addBehavior(o),this},Actor.prototype.letsScrollTextOnTouch=function(t,e,i){return this.reacts("this.scrollText("+e+","+i+", true, reactionTargetIndex);",0,t),this},Actor.prototype.hideObject=function(t,e,i,n){i=i===void 0?!1:i;var o=new HideObject(this,t,e,i,n);return this.addBehavior(o),this},Actor.prototype.hideObjectOnTouch=function(t,e,i){return this.reacts("this.hideObject("+e+","+i+", true, reactionTargetIndex);",0,t),this},Actor.prototype.stops=function(t,e,i){var n=new Stopping(this,t,e,i);return this.addBehavior(n),n},Actor.prototype.letsStop=function(t,e){return this.reacts("this.stops('"+e+"', true, reactionTargetIndex)",0,t),this},Actor.prototype.stopsOnTouch=function(t){return this.reacts("this.stops('"+t+"', true, reactionTargetIndex)",0),this},Actor.prototype.cranks=function(t,e,i,n,o,r,s,a){return this.crankdirection=this.crankdirection===void 0||"clockwise"!==this.crankdirection?"clockwise":"counterclockwise",r&&(this.crankEndfunctions=r),"function"==typeof this.crankEndfunctions&&(this.crankEndfunctions=[this.crankEndfunctions]),this.addBehavior(new Cranking(this,t,e,i,n,o,s,a)),this},Actor.prototype.cranksOnTouch=function(t,e,i,n,o,r){return r&&(this.crankEndfunctions=r),this.reacts("this.cranks("+t+", "+e+", "+i+", "+n+", "+o+", false, true, reactionTargetIndex);",1),this},Actor.prototype.addCrankEndFunction=function(t){this.crankEndfunctions===void 0?this.crankEndfunctions=[t]:"function"==typeof this.crankEndfunctions?this.crankEndfunctions=[this.crankEndfunctions,t]:this.crankEndfunctions.push(t)};
//@ sourceMappingURL=/engine/animation-map.js